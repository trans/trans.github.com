<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>We All Live In A Yellow Submarine &mdash; TRANSCODE</title>
    <link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/assets/main.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/images/trans-logo.png"/>
    <link href="/feed.xml" rel="alternate" type="application/rss+xml" title="TRANSCODE" />
    <meta name="title" content="We All Live In A Yellow Submarine ">
    <link rel="canonical" href="http://trans.github.com/2006/11/11/we-all-live-in-a-yellow-submarine/">
     
           
    <meta property="og:title" content="We All Live In A Yellow Submarine "/>
    <meta property="og:url" content="http://trans.github.com/2006/11/11/we-all-live-in-a-yellow-submarine/"/>
    
    
    <meta property="og:site_name" content="TRANSCODE">
</head>
<body>
    
<section class="site-nav">
    <header>
        <nav id="navigation">
            <a class="brand" href="/">
                <img src="/images/trans-logo.png" alt="Inc" height="100px">
            </a>
            <a href="/" class="home">Blog</a>
            <a href="http://github.com/trans">Product</a>
            <a href="/about">About</a>
        </nav>
        <nav class="tagline">
            <span>Check out all of my open source work</span>
            <a href="http://github.com/trans" class="btn btn-outline">Learn More</a>
        </nav>
    </header>
</section>


<article>

    <div class="container">
        <header>
            <div class="meta">
                By <address><a rel="author" href="" title="" target="_blank"></a> &mdash;
                <time pubdate datetime="2006-11-November" title="November 11, 2006">November 11, 2006</time>
            </div>
            <h1 class="title">We All Live In A Yellow Submarine</h1>
            
        </header>

        <section>
            <h1>We All Live in a Yellow Submarine</h1>

<p>Anyone having read my previous posts, here and on ruby-talk, knows I love to explore ideas. It doesn&#39;t matter if they are considered &quot;good&quot; or &quot;bad&quot;. Most cannot be judged without first exponding on them anyway. In fact, half the time I have no idea where an idea might lead until I sit down and blog it.</p>

<p>Tonight&#39;s idea comes by way of frustration with project organization, specifically module namespaces. A minor issue for small projects; large projects on the other hand... Well, consider my current problem. I have a class called Project. Now related to Project are a number of modularized tool sets. Each tool set can be used independently of the Project class, but typically will be used via it. So where do I locate the tool sets? My first instinct is to go ahead and put them in the class itself.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby">  <span class="k">module</span> <span class="nn">MyApp</span>
    <span class="k">class</span> <span class="nc">Project</span>
      <span class="k">module</span> <span class="nn">ToolSetA</span>
      <span class="k">module</span> <span class="nn">ToolSetB</span>
</code></pre></div>
<p>But I find this less the optimal. While it may be a small and unlikely matter, class is not a bonofide namespace --it is a class. And while it depends on these tool sets, the tool sets do not necessarily depend on it. As such we would never be able to include these tool sets in another namespace --such as the toplevel if it struck my or some users fancy. So we are left then to use some alternate organization.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby">   <span class="k">class</span> <span class="nc">Project</span>
   <span class="k">module</span> <span class="nn">ProjectToolsets</span>
     <span class="k">module</span> <span class="nn">ToolSetA</span>
     <span class="k">module</span> <span class="nn">ToolSetB</span>
</code></pre></div>
<p>or as a compromise</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby">   <span class="k">class</span> <span class="nc">Project</span>
     <span class="k">module</span> <span class="nn">Toolsets</span>
       <span class="k">module</span> <span class="nn">ToolSetA</span>
       <span class="k">module</span> <span class="nn">ToolSetB</span>
</code></pre></div>
<p>The downside here, of course, are the long-winded names. But a better solution eludes me, other than one possibility: the use of all capitals for pure namespace modules.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby">   <span class="k">class</span> <span class="nc">Project</span>
   <span class="k">module</span> <span class="nn">PROJECT</span>
     <span class="k">module</span> <span class="nn">ToolSetA</span>
     <span class="k">module</span> <span class="nn">ToolSetB</span>
</code></pre></div>
<p>It&#39;s a bit strange in appearance but it works well. One quark however is that this new rule begs for my project&#39;s toplevel namepsace to be all caps too. Do I want to go there?</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby">  <span class="k">module</span> <span class="nn">MYAPP</span>
   <span class="k">class</span> <span class="nc">Project</span>
   <span class="k">module</span> <span class="nn">PROJECT</span>
     <span class="k">module</span> <span class="nn">ToolSetA</span>
     <span class="k">module</span> <span class="nn">ToolSetB</span>
</code></pre></div>
<p>I&#39;m not sure it&#39;s the solution I&#39;m after, but to its merit, it does draw a nice distinction between namespace modules and other modules and classes.</p>

<p>In the course of this consideration I began to wonder about the distinction between Class and Module. The difference is almost not-existent in reality. If you peer into the Ruby source code you will find that interoperability between them is purposefully prevented. After all Class is a subclass of Module. Yet they are made distinct for a good reason. They provide conceptually different ideas. A class represents an data archetype; a module represents a reusable component. In fact, one could easily argue that Module itself could use an additional distiction between Namespace and Mixin. Even so, I could not help but wonder if it might yet be possible to have a single Encapsulation, relegating the differences to the elements within them instead of the encapsulation types themselves. I imagined this:</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby">  <span class="k">class</span> <span class="nc">Something</span>
    <span class="k">def</span> <span class="nf">x</span>
    <span class="k">def</span> <span class="nf">y</span>
    <span class="n">mod_def</span> <span class="n">a</span>
    <span class="n">mod_def</span> <span class="n">x</span>
    <span class="k">class</span> <span class="nc">SomethingElse</span>
</code></pre></div>
<p>Instantiating via Something.new or subclassing would provide the instance methods x and y. Including however would provide the mod<em>def methods a and x instead along with adding SomethingElse to the including namespace. More refined means of controlling namespace become possible. For instance include</em>constants could limit inclusion to constants only; vice-verse with include<em>methods. Methods could be defined as both instance and module methods. And while we&#39;re at it, throw in a class</em>def as an alternative to def self.x.</p>

<p>It&#39;s interesting. I&#39;ve often thought about the idea of eliminating the distinction between Class and Module. This is the first time it&#39;s occurred to me that it could be done while retaining the utility of that distinction by passing responsibility down to the methods themselves.</p>

<p>I suppose now the question is, what are the downsides to this? That&#39;ll require further consideration, but one clear point is that methods are less cleanly divided. You could have module methods scattered about your class definitions, weaving in and out of your instance methods. I suspect we would make an effort to nicely organize them however. Besides it means having fewer modules to name --and I&#39;m all for anything that reduces the number of names I have to make-up.</p>

<p>It would be interesting to see how far one could go in implementing this in pure Ruby. Some details of Ruby will hold back a perfect implementation, but the essence of it is certainly possible. For starters, here&#39;s a neat trick for doing without the distinction between class and module.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby">  <span class="k">class</span> <span class="nc">Module</span>
    <span class="k">def</span> <span class="nf">new</span>
      <span class="n">mod</span> <span class="o">=</span> <span class="nb">self</span>
      <span class="no">Class</span><span class="o">.</span><span class="n">new</span><span class="p">{</span> <span class="kp">include</span> <span class="n">mod</span> <span class="p">}</span><span class="o">.</span><span class="n">new</span>
    <span class="k">end</span>
  <span class="k">end</span>
</code></pre></div>
<p>Have fun! Unfortunately I&#39;m not. I&#39;m still stuck on the forementioned namespace issue! Oh well. Back to the coding board...</p>

            
<div class="social">
    <div>
        <a href="https://twitter.com/share" class="twitter-share-button"  data-text="We All Live In A Yellow Submarine" data-related="transgigamic">Tweet</a>
    </div>
    
    
    
    <div>
        <div class="g-plusone" data-size="medium"></div>
    </div>
    
    
    
    <div>
        <a href="http://news.ycombinator.com/submit" class="hn-share-button">Vote on HN</a>
    </div>
    
</div>

        </section>

        <footer>
            <address>
               
                <p>Written by <strong><a rel="author" href="https://twitter.com/" title="" target="_blank"></a></strong><br>
                <span class="muted"></span>
                </p>
            </address>

        </footer>

        
    </div>
</article>


<footer class="site-footer">
    <div class="container">
        &copy; 2014 
        
        <nav>
            <a href="http://transcode.github.com">TRANS</a> &middot;
            <a href="/">Blog</a> &middot;
            <a href="http://github.com/trans">Product</a> &middot; 
            <a href="/about">About</a>
        </nav>
        
        <nav class="social">
            
            <a href="https://twitter.com/transgigamic" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter black"></i></a>
            
                
            <a href="/feed.xml" title="RSS Feed">
                <i class="icon icon-rss black"></i>
            </a>
        </nav>
        <p>Incorporated theme by <a href="https://sendtoinc.com">Inc</a></p>
    </div>
</footer>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/assets/main.js"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<script>
    (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = '//hnbutton.appspot.com/static/hn.min.js';
        s.parentNode.insertBefore(g, s);
    }(document, 'script'));
</script>


</body>
</html>
