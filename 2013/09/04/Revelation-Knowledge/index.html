<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruby AOP Made Simple &mdash; TRANSCODE</title>
    <link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/assets/main.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/images/logo.png"/>
    <link href="/feed.xml" rel="alternate" type="application/rss+xml" title="TRANSCODE" />
    <meta name="title" content="Ruby AOP Made Simple ">
    <link rel="canonical" href="http://trans.github.com/2013/09/04/Revelation-Knowledge/">
     
           
    <meta property="og:title" content="Ruby AOP Made Simple "/>
    <meta property="og:url" content="http://trans.github.com/2013/09/04/Revelation-Knowledge/"/>
    
    
    <meta property="og:site_name" content="TRANSCODE">
</head>
<body>
    
<section class="site-nav">
    <header>
        <nav id="navigation">
            <a class="brand" href="/">
                <img src="/images/logo.png" alt="Inc">
            </a>
            <a href="/" class="home">Blog</a>
            <a href="http://incorporated.sendtoinc.com/">Product</a>
            <a href="https://tabcomputing.com/about/">About</a>
        </nav>
        <nav class="tagline">
            <span>Get a modern blog for your company</span>
            <a href="http://incorporated.sendtoinc.com/" class="btn btn-outline">Learn More</a>
        </nav>
    </header>
</section>


<article>

    <div class="container">
        <header>
            <div class="meta">
                By <address><a rel="author" href="" title="trans" target="_blank">trans</a> &mdash;
                <time pubdate datetime="2013-04-September" title="September 04, 2013">September 04, 2013</time>
            </div>
            <h1 class="title">Ruby AOP Made Simple</h1>
            
        </header>

        <section>
            <p>I just had a revelation about programming languages.</p>

<p>Coming into this project, my primary goal was to rate a Forth derivative, that added types, polymorphism and functional-orientation to the language. That goal is proceeded reasonably well. However, in the course of thinking about all the varying aspects of the design I hit upon a very interesting concept. I asked, &quot;What does the computer know?&quot; In other words, how are we really informing the computer about our systems as we program. It only stands the reason that the more the computer knows the more we easily we can communicate our intent.</p>

<p>So lets start with the bread and butter the algorithm, and seeing that we want to stay in the realm of functional-programming ultimately will strictly speak of functions. But to proceed, lets get our barrings by asking what other languages tell the computer about such these things, whether they be procedures, functions or methods.</p>

<p>Forth is probably the most basic in this regard of all languages, with the exception of Assembly. It doesn&#39;t tell the computer anything at all about a <em>word</em> (Forth&#39;s term for these things) other then the procedure by which it is calculated. Some Forth words provide terse stack diagrams but they are simply comments, ignored by the computer.</p>

<p>Other languages, like Ruby, are essentially the same as Forth. Ruby is a dynamic language, so it doesn&#39;t provide types for method arguments. To a limited degree names are provided for them, but they are promptly thrown away by the interpretor, so the computer is no more knowledgeable in that regard either. We do get one piece of extra information though. We can ask Ruby what the arity of a method is.</p>

<p>Python takes us a tad step further with regards the argument names. One can pass arguments to a method by name. That&#39;s an improvement, but that&#39;s about as far as it goes.</p>

<p>On the other side of things, there are languages like Java which are very strictly typed. But the types do little more than inform the compiler how to do it&#39;s job better. In the language itself we can&#39;t really ask about them. The names of the parameters are still ultimately disposable to the computer. (I wouldn&#39;t be surprised if there is some insanely complicate reflection library out there for Java that would make some of this possible, but regardless it is not part of the <em>real</em> language.)</p>

<p>Then there are languages like Haskell which are strictly typed and can tell us all about those types. </p>

<p>Haskell&#39;s about the state of the art at this point. There isn&#39;t a language I know of that informs the computer more about it&#39;s functions.</p>

<p>So then I asked, what would be a <em>knowledgeable design</em> such that the computer would know about these things we computers use day in and day out, and really be able to converse with us about them, so to speak.
Well, lets break it down. What is there to know about a function?</p>

<ul>
<li>Arity</li>
<li>Types of the arguments</li>
<li>Types of the return values</li>
<li>Name of the function</li>
<li>Name of the arguments</li>
<li>Definition of the function</li>
</ul>

<p>Beside these, it may even behoove us to inform the computer about aliases for the various names, so it is easier to talk about these things for different programmers who might not be as with the code, or just to give us some programmer to speak more naturally, rather than always being so tortured to use the exact term.</p>

<p>Lets try and example, by writing out some pseudo-code for a function. Let&#39;s keep it simple, say, calculating the tip for a check.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">function tip(amount, percentage)
  typeof amount Currency
  typeof percentage Float

  default amount $0
  default percentage 20%

  aliases percentage percent pnct pct
  aliases amount price cost

  definition amount * percentage

  return-type Currency
end

aliases tip gratuity
</code></pre></div>
<p>But notice we also said &quot;tip <em>for a check</em>&quot;. That means something, so in our pseudo-code lets try to express that.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">context tip check

aliases check bill
</code></pre></div>
<p>Okay. So what do we have after all that? Well, at the very least we have a way to speak to the computer about the various parts of our function.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">tip.parameters  =&gt; [amount, percentage]
tip.return_type =&gt; Currency
tip.parameter(amount).type  =&gt; Currency
tip.parameter(pcnt).default =&gt; 20%
</code></pre></div>
<p>And so on. We can also call the function of course, but we could do so in unique way now. We can do it in an object-oriented way. After we do have a <em>thing</em> that is our function.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">mytip = new tip
mytip.amount = $100.00
mytip.return  =&gt; $20
</code></pre></div>
<p>Now in the larger scheme of things, if that is all there were it might not get us too much further than the programming languages we mentioned above. But, we might now be able take all this new found knowledge granted to the computer about our program and start asking it to do some things we might normally do ourself.</p>

<p>For example, lets describe to the computer the concept of paying for lunch.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">function pay(bill, tender)
  type bill Bill
  type tender Currency
  definition
    tender - (tally + gratuity(pcnt: 20%))  # this right here!
  return-name change 
  type change Currency

object Bill(menu-items, tax)
  type menu-items List(Product)
  type tax Percentage

function tally(bill)
  type bill Bill
  definition
     net = sum(bill.menu_items.each.cost) 
     net + net * tax
  aliases tally price cost
  return-type Currency

object Product(name, price)
  aliases price cost
  type name String
  type price Currency
</code></pre></div>
<p>Look closely at the line <code>tally + gratuity</code>. Notice we didn&#39;t say <code>bill.tally + tip(bill.tally)</code>. Not I know my pseudo code doesn&#39;t really get us to the point where it&#39;s clear how we can be so concise. But I think the basic notion is there. The idea is that by explicitly defining the various parts of our model, drawing relationships between those parts via aliases then the computer itself can start to make the connections between the return values and the input parameters for us.</p>

<p>I suspect if this kind of approach is taken to it&#39;s natural conclusion, it should ultimately allow us to write much more reusable code, write that code in a much more natural and information rich manner.</p>

<p>Taking a step back, I believe it would be too much of undertaking for me to endeavor upon at this point. Nonetheless it does move me in a smarter direction with March --to make the language more knowledgeable.</p>

            
        </section>

        <footer>
            <address>
               
                <p>Written by <strong><a rel="author" href="https://twitter.com/" title="" target="_blank">trans</a></strong><br>
                <span class="muted"></span>
                </p>
            </address>

        </footer>

        
    </div>
</article>


<footer class="site-footer">
    <div class="container">
        &copy; 2014 
        
        <nav>
            <a href="http://tabcomputing.com/">Tab Computing</a> &middot;
            <a href="/">Blog</a> &middot;
            <a href="http://incorporated.sendtoinc.com/">Product</a> &middot; 
            <a href="https://tabcomputing.com/about/">About</a>
        </nav>
        
        <nav class="social">
            
                
            <a href="/feed.xml" title="RSS Feed">
                <i class="icon icon-rss black"></i>
            </a>
        </nav>
        <p>Incorporated theme by <a href="https://sendtoinc.com">Inc</a></p>
    </div>
</footer>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/assets/main.js"></script>






</body>
</html>
