<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <title>7R4N5.C0D3 - This Old Hash</title>

    <link rel="stylesheet" href="/smeagol/main.css" type="text/css"/> 
    <link rel="stylesheet" href="/smeagol/pygment.css" type="text/css"/>

    <link rel="stylesheet" href="/assets/styles/custom.css" type="text/css"/> 

    <style>
      body{ color: #222; background: url(assets/images/bg.jpg); padding: 0; margin: 0; }

      header{ color: #222; height: 60px; margin: 0; padding: 30px 0; font-family: courier, monospace; font-size: 48px; }
      header h1 { margin-top: 20px; color: #222; text-shadow: 0px 0px 5px white; }
      header h2 { color: #cccccc; text-shadow: 0px 0px 5px black; padding: 5px 0 20px 15px; }

      nav{ padding: 1em; background: #000; opacity: 0.8; border: none; }
      nav ul li a{ color: #eee; }
      nav ul li a:hover{ color: #59c; }

      #content{ color: #222; padding: 1em; width: 550px; margin: 0; background: #fff; }
      #content h1 { color: #222; }
      #content h2 { color: #222; }
      #content p { color: #222; }

      #sidebar{margin-bottom: 20px; padding: 20px; background: #fff; border: 1px solid #ccc; min-height: 100px; box-shadow: 5px 5px 10px #ccc; }
      #sidebar h1,h2 { font-family: times; }
      #sidebar h2 { font-size: 2em; margin: 10px 0 10px 0; }

      footer{width: 550px; color:#222; margin-top:20px; padding:20px; border:none; background:#fff; }

      #container{ margin: 0 auto; padding 0; width: 900px; }

      .tab { display: none; }
    </style>

    <!--[if lt IE 9]>
    <script src="/smeagol/html5.js"></script>
    <![endif]-->

    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

    <script>
      $(document).ready(function(){
        show('#am');
      });
    </script>

    <script>
      function show(id){
        $('.tab').hide();
        $(id).fadeIn();
      };
    </script>

</head>

<body>
	
	
    <div id="container">
		<header>
			<h1>7R4N5.C0D3</h1>
		</header>

		<nav>
      <button onMouseOver="show('#am');">I AM</button>
      <button onMouseOver="show('#make');">I MAKE</button>
      <button onMouseOver="show('#ad');">I AD</button>
      <button onMouseOver="show('#use');">I USE</button>
      <button onMouseOver="show('#read');">I READ</button>
		</nav>

    <div id="sidebar">
      <div id="am" class="tab">
        <h2 class="side-title">I Am</h2>
        <p>Trans has been coding Ruby since 2002. Now he shares with you. Kazaam!</p>
      </div>

      <div id="make" class="tab">
        <h2 class="side-title">I Make</h2>
        <div style="text-align: center;">
          <a href="http://rubyworks.github.com"><img src="/assets/images/rubyworks.png" style="width: 250px;" /></a><br/>
          <a href="http://rubyworks.github.com/facets"><img src="/assets/images/RubyFacets.png" style="width: 270px;"/></a><br/>
          <a href="http://death.rubyforge.org"><img src="/assets/images/skull4.png" style="margin-top: 0;"/></a><br/>
        </div>
      </div>

      <div id="ad" class="tab">
        <h2 class="side-title">I Advertise</h2>
        <div style="text-align: center;">
          <script type="text/javascript"><!--
          google_ad_client = "pub-1126154564663472";
          /* RUBYWORKS 09-10-02 728x90 */
          google_ad_slot = "0788888658";
          google_ad_width = 728;
          google_ad_height = 90;
          //-->
          </script>
          <script type="text/javascript"
          src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
          </script>
        </div>
      </div>

      <div id="use" class="tab">
        <h2 class="side-title">I Use</h2>
        <a href="http://ruby-lang.org"><img src="/assets/images/ruby-lang.png"/></a><br/>
        <a href="http://github.org"><img src="/assets/images/github-logo.png" style="float: left; margin-left: 5px; width: 115px;"/></a>
        <a href="http://github.org"><img src="/assets/images/jquery-logo.gif" style="margin-left: 10px;"/></a>
        <a href="http://cukes.info/"><img src="/assets/images/cuke_logo.png"/></a>
      </div>

      <div id="read" class="tab">
        <h2 class="side-title">I Read</h2>
        <a href="http://rubyinside.com/"><img src="http://www.rubyinside.com/wp-content/themes/rubyinside2009/images/logo2.png" align="center"/></a>
      </div>

      <div id="work" class="tab">
        <h2 class="side-title">I Work</h2>
        <div id="github-badge"></div>
        <script type="text/javascript" charset="utf-8">
          GITHUB_USERNAME="trans";
        </script>
        <script src="http://drnic.github.com/github-badges/dist/github-badge-launcher.js" type="text/javascript"></script>
      </div>
    </div>

		<article>
			<h1>This Old Hash</h1>
    	<div id="content">
<h1>This Old Hash</h1>

<p>The Hash may well be the most used class in Ruby. Sure, our programs
have arrays and strings galore, but they generally come and go without
much ado. Hashes on the other hand get <em>used</em>; and by that I mean to
say, we spend a lot of time fussing with them. I think there are two
significant reasons for this and I will focus on the first, and
the more important of the two, here.</p>

<p>Now, I suspect you would agree, if I were to present you with a class
which was clearly overkill for vast majority of its intended uses, and
its use required repeated mitigation of its unused features, I have no
doubt, you'd unequivocally advise me to select a "<i>better tool for the job</i>".
And yet, that's the situation all Ruby programmers face, day in and
day out, with Ruby's Hash.</p>

<p>Ruby's Hash is exceptionally powerful because it supports any type of
object as a hash key. That's really really cool... for all of about
five minutes. The truth is, the vast majority of cases only require
one type of key --for Ruby that will either be a Symbol or a String,
and because of this, a great deal of time and code is wasted ensuring
all keys are that single type. Because of this, methods like 
<code>#to_sym</code> often riddle our scripts.</p>

<p>The issue is undeniably attested to by real world "solutions"
others have created to address it, such as Ruby Facets'
<a href="http://facets.rubyforge.org/doc/api/core/classes/Hash.html#M000124">Hash#rekey</a>.
and Ruby on Rails'
<a href="http://api.rubyonrails.org/classes/HashWithIndifferentAccess.html">HashWithIndifferentAccess</a>.
But let's face it, these are both underwhelming attempts at mitigating
the fundamental problem.</p>

<p>A real solution would have the current Hash class renamed, and a new
limited-key structure put in its place. The old class would still be
available, of course, for those special cases when a key of any object
type is required, but the new, more utilitarian Hash class would be
the literally-constructed default. The end effect of this change would
be simple:</p>

<div class="highlight"><pre>    <span class="n">h</span><span class="o">[</span><span class="s1">'a'</span><span class="o">]</span> <span class="o">==</span> <span class="n">h</span><span class="o">[</span><span class="ss">:a</span><span class="o">]</span>
    <span class="n">h</span><span class="o">[</span><span class="s1">'1'</span><span class="o">]</span> <span class="o">==</span> <span class="n">h</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
</pre>
</div>


<p>This means reducing all hash keys to a single <em>symbolic</em> index type.
It does not matter what the actual reference is, a String, Symbol,
Integer, etc. just so long as it has a predictable symbolic
representation.</p>

<p>It may feel a bit strange to consider a suggestion that actually calls
for the reduction of features. More often change requests call for just
the opposite and YAGNI has to be peddled out on them. But, I think, we 
often underestimate the power of simplicity. Consider ideas such as 
convention-over-configuration and duck-typing --simplifications that
are not necessarily intuitive at first. But in the end, they make our
life as programmers a good bit more productive.</p>

<blockquote>
"Make everything as simple as possible, but not simpler."
<cite>--Albert Einstein</cite>
</blockquote>

<hr /><p>title      : This Old Hash
author     : trans
date       : 2008-10-06
categories : [ruby, hash]
layout     : post</p>
			</div>
		</article>

		<footer>
			<small>Last edited by <b>7rans</b> on December 03, 2011.</small>
			<small style="float:right;">
				This site is a <a href="https://github.com/blog/699-making-github-more-open-git-backed-wikis">GitHub Wiki</a>
				mirror powered by <a href="http://smeagolrb.info">Smeagol</a>.
			</small>
		</footer>
    </div>
</body>
</html>
