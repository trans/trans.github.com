<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <link rel="icon" type="image/png" href="/assets/images/trans-logo.png">

    <title>7R4N5.C0D3 - 2006 08 26 the persnickety order of self serving modules</title>

    <link rel="stylesheet" href="/smeagol/main.css" type="text/css"/> 
    <link rel="stylesheet" href="/smeagol/pygment.css" type="text/css"/>

    <link rel="stylesheet" href="/assets/styles/custom.css?reload=true" type="text/css"/>
    <link rel="stylesheet" href="/assets/styles/social.css?reload=true" type="text/css"/>  

    <!--[if lt IE 9]>
    <script src="/smeagol/html5.js"></script>
    <![endif]-->

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

    <script type="text/javascript" src="/assets/scripts/jquery.easing.js"></script>
    <script type="text/javascript" src="/assets/scripts/jquery.social.share.1.2.min.js"></script>

    <script src="/assets/scripts/main.js"></script>

    <script>
      $(document).ready(function(){
        $('#social-share').dcSocialShare({
          twitterId: 'transgigamic',
          tabText: '<img src="/assets/images/tab_share.png" alt="Share" />',
          buttons: 'twitter,facebook,plusone,stumbleupon,digg,linkedin,pinit'
        });
      });
    </script>

</head>

<body>
	
  <div id="container">
		<div id="header">
			<h1>7R4N5.C0D3</h1>
		</div>

    

		<div id="nav">
      <ul>
<li><a href="/index.html">Blog</a></li>
<li><a href="/Projects/index.html">Projects</a></li>
<li><a href="/Tools/index.html">Tools</a></li>
<li><a href="/Reads/index.html">Reads</a></li>
</ul>

		</div>

		<article>
    	<div id="content">
          <b class="path">&gt; 2006 08 26 the persnickety order of self serving modules</b>

<!-- Start Shareaholic Sexybookmark HTML-->

<div class="shr_class shareaholic-show-on-load">
</div>

<!-- End Shareaholic Sexybookmark HTML -->
<!-- Start Shareaholic Sexybookmark script -->

<script type="text/javascript">
var SHRSB_Settings = {"shr_class":{"src":"/assets/shareaholic","link":"","service":"236,45,5,7,88,92,61,204,202,102,3,40,10,2,38,195,27,48,6,1,218,24,46,267,74,191,265,219,210,78,240,207,54,53,52,201","apikey":"6ffe2cbf142c45bd4cd03b01ec46b8658","localize":true,"shortener":"google","shortener_key":"","designer_toolTips":true,"twitter_template":"${title} - ${short_link} via @Shareaholic"}};
</script>

<script type="text/javascript">
(function() {
var sb = document.createElement("script"); sb.type = "text/javascript";sb.async = true;
sb.src = ("https:" == document.location.protocol ? "https://dtym7iokkjlif.cloudfront.net" : "http://cdn.shareaholic.com") + "/media/js/jquery.shareaholic-publishers-sb.min.js";
var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(sb, s);
})();
</script>
<!-- End Shareaholic Sexybookmark script -->

<h1>The Persnickety Order of Self-Serving Modules</h1>

<p>This one caught me off guard.</p>

<div class="highlight">
<pre><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>001<span class="p">:</span>0<span class="o">&gt;</span> <span class="n">module</span> <span class="n">M</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>002<span class="p">:</span>1<span class="o">&gt;</span>   <span class="n">def</span> <span class="n">x</span><span class="p">;</span> "<span class="n">x</span>"<span class="p">;</span> <span class="k">end</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>003<span class="p">:</span>1<span class="o">&gt;</span> <span class="k">end</span>
<span class="p">=</span><span class="o">&gt;</span> <span class="n">nil</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>005<span class="p">:</span>0<span class="o">&gt;</span> <span class="n">module</span> <span class="n">Q</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>006<span class="p">:</span>1<span class="o">&gt;</span>   <span class="n">extend</span> <span class="n">self</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>007<span class="p">:</span>1<span class="o">&gt;</span>   <span class="n">include</span> <span class="n">M</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>008<span class="p">:</span>1<span class="o">&gt;</span> <span class="k">end</span>
<span class="p">=</span><span class="o">&gt;</span> <span class="n">Q</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>009<span class="p">:</span>0<span class="o">&gt;</span> <span class="n">Q</span><span class="p">.</span><span class="n">x</span>
<span class="n">NoMethodError</span><span class="p">:</span> <span class="n">undefined</span> <span class="n">method</span> `<span class="n">x</span><span class="o">'</span> <span class="k">for</span> <span class="n">Q</span><span class="p">:</span><span class="n">Module</span>
        <span class="n">from</span> <span class="p">(</span><span class="n">orb</span><span class="p">):</span>9
        <span class="n">from</span> <span class="p">:</span>0
</pre>
</div>


<p>Why isn't the included #x coming along for the ride in the self extension of Q? This kind of dyanmicism is vital when dynamically loading behaviors. And so I suspect it must do with the dread <a href="http://groups.google.com/group/comp.lang.ruby/msg/70509b289f0ea999">Dynamic Module Inclusion Problem</a>? And it would appear that I am right:</p>

<div class="highlight">
<pre><span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>012<span class="p">:</span>0<span class="o">&gt;</span> <span class="n">module</span> <span class="n">M</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>013<span class="p">:</span>1<span class="o">&gt;</span>   <span class="n">def</span> <span class="n">x</span><span class="p">;</span> "<span class="n">x</span>"<span class="p">;</span> <span class="k">end</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>014<span class="p">:</span>1<span class="o">&gt;</span> <span class="k">end</span>
<span class="p">=</span><span class="o">&gt;</span> <span class="n">nil</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>015<span class="p">:</span>0<span class="o">&gt;</span> <span class="n">module</span> <span class="n">Q</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>016<span class="p">:</span>1<span class="o">&gt;</span>   <span class="n">include</span> <span class="n">M</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>017<span class="p">:</span>1<span class="o">&gt;</span>   <span class="n">extend</span> <span class="n">self</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>018<span class="p">:</span>1<span class="o">&gt;</span> <span class="k">end</span>
<span class="p">=</span><span class="o">&gt;</span> <span class="n">Q</span>
<span class="n">orb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span>019<span class="p">:</span>0<span class="o">&gt;</span> <span class="n">Q</span><span class="p">.</span><span class="n">x</span>
<span class="p">=</span><span class="o">&gt;</span> "<span class="n">x</span>"
</pre>
</div>


<p>Yes, another of the edge cases. But the preponderance weighs heavy on the Coding Spirit. The Dynamic Module Inclusion Problem is getting old.</p>
      </div>
    </article>

    <div id="comments">
      <!-- Commment vis Disqus -->
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        /**
         * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
         */
        (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = 'http://transcode.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=transcode">comments powered by Disqus.</a></noscript>
      <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

		<div id="footer">
      <div class="tiger">
      </div>
			<small>Last edited by <b>7rans</b> on June 14, 2012.</small>
			<small style="float:right;">
				This site is a <a href="https://github.com/blog/699-making-github-more-open-git-backed-wikis">GitHub Wiki</a>
				mirror powered by <a href="http://smeagolrb.info">Smeagol</a>.
			</small>
		</div>

  </div>

  <div id="social-share"></div>
</body>
</html>
