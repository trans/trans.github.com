<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRANSCODE &mdash; Trans Technology and Programming Blog</title>
    <link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/assets/main.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/images/trans-logo.png"/>
    <link href="/feed.xml" rel="alternate" type="application/rss+xml" title="TRANSCODE" />
    <meta name="title" content="TRANSCODE">
    <link rel="canonical" href="http://trans.github.com/page2/">
     
           
    <meta property="og:title" content="TRANSCODE"/>
    <meta property="og:url" content="http://trans.github.com/page2/"/>
    
    
    <meta property="og:site_name" content="TRANSCODE">
</head>
<body>
    
<section class="site-nav">
    <header>
        <nav id="navigation">
            <a class="brand" href="/">
                <img src="/images/trans-logo.png" alt="Inc" height="120px">
            </a>
            <a href="/" class="home">Blog</a>
            <a href="http://github.com/trans">Github</a>
            <a href="/About/">About</a>
        </nav>
        <nav class="tagline">
            <span>Check out all of my open source work</span>
            <a href="http://github.com/trans" class="btn btn-outline">Learn More</a>
        </nav>
    </header>
</section>

<div class="blog-cover" style="background-image:url(/images/blog-cover.jpg);">
    
    <section>
        <div class="container">
            <h1>TRANSCODE</h1>
            <h3>Trans Technology and Programming Blog</h3>
        
            
            <a href="https://twitter.com/transgigamic" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter"></i></a>
            
            
            <a href="/feed.xml" title="RSS Feed">
                <i class="icon icon-rss"></i>
            </a>
        </div>
    </section>
</div>

<article class="container">

  
    <section class="index">
        <!-- -->
        <div>
            <h1 class="title"><a href="/2013/08/05/memory-frabrics/" rel="prefetch">Memory Frabrics</a></h1>
            <p><p>I&#39;ve been thinking about data structure the last week, and I was wondering why data structures are implemented the way they are.</p>

<p>It occurs to me that it is mostly due to the way computer memory is designed. Computer memory is a randomly accessible linear structure. Basically what you have is a large string of values that you can access by a single position index. This is the <em>interface</em> of memory, and all data structures are there root must use it in their implementation.</p>

<p>But I wondered, how would data structures differ is memory itself was structured in some other fashion? For instance, what if memory wasn&#39;t a linear string of data, but a two-dimensional fabric? While arrays might be unaffected by such a change, clearly things like matrices could be stored in a much more literal fashion. It would be interesting to see the form of data structure talented individuals might devise with this.</p>

<p>Even so, two-dimensions is still somewhat limiting, taking it to a third dimension could open tremendous possibilities in the <em>relative storage</em> of data.</p>

<p>But might we go even further. What would prevent us from making the dimensionality definable? If a memory cell could be associated with any other memory cell as often as desired, then the <em>fabric</em> could have any structure desired. Interestingly, the effect of this would be to move what we already do in software, via indirect memory referencing, to the hardware itself.</p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2013-05-August" title="August 05, 2013">August 05, 2013</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h1 class="title"><a href="/2013/03/08/ruby-avoids-consistency-like-the-plague/" rel="prefetch">Ruby Avoids Consistency Like The Plague</a></h1>
            <p><h1>Ruby Avoids consistency like the Plague</h1>

<p>Ruby is such a great language in so many ways, it always feels especially disappointing when one discovers a way in which it lacks. I believe much of Ruby&#39;s less noble attributes stem from a single source: Matz and company eschew <em>consistency</em> as if it were a disease.</p>

<p>Let&#39;s take a simple example that occurred to me today as I was working on a <a href="http://rubyworks.github.com/mirror">reflection</a> system for Ruby. It has probably slipped by every Rubyists on the planet, but once it is pointed out, it&#39;s pretty obvious. A <em>class</em> has <em>instance methods</em> of which we can get a list via the <code>#instance_methods</code> method, as opposed to an <em>instance</em> of a class whose methods we can list via <code>#methods</code>. That in itself might be an acceptable naming system accept the instance also has a method called <code>#instance_variables</code> (not to mention a number of other &quot;instance_&quot; methods). Give it a moments though and it becomes clear that the terms don&#39;t jive well. The problem lies in the fact that classes don&#39;t actually have &quot;instance methods&quot; per-se. They have <em>method definitions</em> that become instance methods when a class is instantiated. It would have made much more sense for the class&#39;s method to called <code>#methods</code> and the instance&#39;s to be called <code>#instance_methods</code>. Or, at the very least, the class terminology could have used something else like <code>#method_definitions</code>.</p>

<p>Generally we developers just accept APIs as they a given us and go about using them without giving too much thought to the nomenclatures used. Unfortunately inconsistent terminology often leads to difficulties communicating with other developers, ultimately wasting time and energy. The above is just one example of such an inconsistency. But don&#39;t bother telling Matz or the rest of the Ruby core team. They will just tell you &quot;consistency is as a bad reason for language change&quot;. Perhaps in the short-term that is true to avoid backward compatibility issues. In the long-run, however, it&#39;s only a matter of time before people head to greener pastures.</p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2013-08-March" title="March 08, 2013">March 08, 2013</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h1 class="title"><a href="/2013/02/28/the-end-of-ruby/" rel="prefetch">The End Of Ruby</a></h1>
            <p><h1>The End of Ruby</h1>

<p>I have given 10 years of my life to Ruby. And in return I have been ridiculed, mocked, cussed at, laughed at, shunned, harassed, ignored and all but excommunicated from the Ruby community. And all for nothing more than trying to be a helpful and constructive part of it. </p>

<p>Let me be clear. I am not a saint. Lord knows I can get emotional and put my foot squarely in my mouth at times. I have not always been the nicest guy. But I can tell you I have tried to be, and when I haven&#39;t it has been in reaction to others poor behaviour. And when I have found myself going too far I apologize. I don&#39;t hold grudges, I am gracious about being proven wrong and I always work with people as professionally as I can, even with people I basically can&#39;t stand (b/c of the way they have treated me).</p>

<p>I suppose it all started with GUtopIa. Long ago, when I first learned Ruby I wanted to create a very cool Ruby GUI that provided an unified interface to any GUI back-end (Gnome/GTK, KDE/Qt, Fox, tcl/tk, etc.) Some others were enthused about the project and we began to discuss privately. Having initiated the project I just assumed a leadership roll and began working out how to proceed. At the time I didn&#39;t really understand that I was in over my head (I was decent procedural programmer, but had zero OOP nor Agile experience.) This presumption irked a few a people and Rich Kilmer emailed me a lovely message letting me know that they &quot;did not work&quot; for me. I was a bit taken aback. I did not mean to come off that way and apologized, but it was too late. They informed me that they would be working a WxWidgets binding instead. It was a valuable lesson. And while I would like to think my apology was accepted, those initial ill feelings could have carried on into the community. I have no way to know. </p>

<p>Other then a few sometimes mildly heated arguments. I imagine some people disliked me b/c I was willing to argue a point in great detail and at length. I can see how that would be frustrating on the other end. But among those individuals --David Black, Ara Howard, Austin Ziegler, Guy Wright, and so on, despite what they might have felt about me personally, they maintained a high level of professionalism, put heated debates in proper context and moved on cooperatively with the shared of endeavour of being and becoming great Rubyists.</p>

<p>Bu then there was Ryan Davis. The first thing Ryan Davis ever said about me (AFAIK) was a <a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/215440">slander</a> of my first two Ruby projects.</p>

<blockquote>
<p>&quot;No, I never looked at reap. I wouldn&#39;t touch it or facets with someone else&#39;s ten foot pole.&quot;</p>
</blockquote>

<p>Sounds like an objective point of view, doesn&#39;t it? He hadn&#39;t even looked at the project but he knew he wouldn&#39;t touch it. Why the prejudice? I had no idea. But I would later come to understand that it actually had nothing to do with code. Reap and Facets were the first two open-source projects I had ever attempted to personally maintain in my life, and at that time they hadn&#39;t been out long. Both were early in their 0.x series of release. So I accepted the criticism, despite its nonconstructive form and worked to make my projects better. And with time, the quality and quantity of project continued to improve. But the way I was treated did not.</p>

<p>I submitted a patch to RubyGems once to allow a list of resource links in the gemspec, e.g. <code>home</code>, <code>docs</code>, <code>wiki</code>, <code>issues</code>, etc. Ryan did nothing but tear it apart, offering little in the way of constructive advice, but spilling slurs and curse words throughout his line by line &quot;critique&quot;. When I responded --in order to have a <em>dialog</em> about why I coded things the way I did, he only became more vitriolic. A comment he posted, containing a dialogue he had with a colleague of his (most likely Aaron Patterson), in some ill attempt to justify his behaviour:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">5:13:17 PM Professor: he tried to defend every single one
5:13:26 PM Professor: none of them he went &quot;ok, thats fine, i&#39;ll do it that way&quot;
5:13:28 PM zenspider: he needs to learn how the fuck to take critiques
</code></pre></div>
<p>It would seem he and his company think dialog is nothing more than a questioning of their authority.
Perhaps it would seem ironic then that once again I did accept every critique (that is the actual ones which were mostly provided by Eric Hodel), whether I agreed with it or not (I had no avenue for discussing it), and made a <a href="https://github.com/rubygems/rubygems/pull/15">new patch</a> that addressed every point. And though I specifically asked that anyone but Ryan Davis review it, I and the patch were ignored. Months later the request was closed with only a small comment from Ryan Davis, &quot;Looks like this is dead.&quot; To this day the gemspec does not support links, and one must still enter them by hand on rubygems.org.</p>

<p>Eventually I learned that Ryan Davis and Aaron Patterson are co-workers, and along with Eric Hodel they are the leading members of a club called <a href="">Seattle.rb</a>. While greatly gifted as developers, they are also notoriously arrogant. They have demonstrated this time and again and in numerous ways. From simply failing to comment their code to ganging up on some poor coder just trying to be constructive. One of their favourite tactics is to gang up on others, making it look like independent analysis through the visor of the Internet, when in fact it is per-determined plan. Unfortunately this group has systematically taken over much, if not most, of Ruby&#39;s development. They hold great power over MRI now, and they control most of the major projects of the standard library --RubyGems, Nokogiri, Psych, RDoc, etc.</p>

<p>&quot;But what about Matz?&quot; I hear you ask. &quot;Surely he remains in firm control?&quot; Every one knows Matz is a nice guy, and that is true. Matz has always been a nice guy. But Matz has also always been a very passive personality. No one is perfectly nice. So I suspect Matz&#39; outlet is classic passive-aggressive behaviour. A good example of this is his complete avoidance of the <a href="https://bugs.ruby-lang.org/issues/7716">autoload issue</a>. Even though he announced over a year ago that &quot;autoload will be dead&quot;, none of the code in the standard lib has made any changes to remove it. When asked, the maintainers said they had no plans to do so. I have been asking for <em>five years</em> for the simplest of patches to fix this issue --I even submitted a patch myself and I am not a C coder, but never has it been addressed. I have email Matz directly and received no response. To this day I have at least three programs that can not be fully utilized because of it. So, a nice as Matz might be, he lacks the requisite character to be a strong leader to enforce professionalism among those he deem technically merited to work on Ruby. </p>

<p>...</p>

<p>The last straw..</p>

<p>Sometime ago I improved the design of FileUtils a good bit and <a href="https://bugs.ruby-lang.org/issues/4970">submitted a patch</a> to ruby-core. I did so because Ruby Facets adds a couple of extensions to FileUtils, and they way the code had been written made it very cumbersome to do so properly. The patch was review and accepted.</p>

<p>Last week Eric Hodel found an subtle bug in the code --none of the tests caught it. The problem was easy enough to ascertain and to fix. I actually offered an idea for a solution that would actually make the code even better. Again there was no dialog. I was ignored. Eric sanctimoniously appointed himself maintainer for fileutils.rb and decided to revert all the improvements back to the old code. Despite the fact that the new code already went out with Ruby 2.0 preview release (so much for &quot;feature freezes&quot;). Despite the fact the the new code is far superior to the old (<a href="http://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/39544/diff/lib/fileutils.rb">compare for yourself</a>). And despite my objections. There is only one reason Eric reverted that code. To spite me. </p>

<p>He would deny it, of course. But the evidence is clear enough. Why no dialog? Why such a drastic reversion of clearly improved code that passes all tests? Why was Aaron the only other person to comment with out any constructive thing to say, just a &quot;yea do it&quot;. Taken in conjunction with the combined history of this groups persecution of me, the answer is obvious.</p>

<p>When a project begins reverting released code solely on the basis of personal vindictiveness, that project is on a fast track to doom. Ruby has become such a project. I am not the <a href="http://news.cnet.com/8301-13846_3-9838477-62.html">first to see it</a>, or the first to <a href="http://www.rubyinside.com/why-the-lucky-stiff-is-missing-2278.html">react to it</a>, and comments about it are only increasing.</p>

<ul>
<li>http://www.jperla.com/blog/post/ruby-is-a-ghetto</li>
<li>http://gilesbowkett.blogspot.com/2013/02/nodejs-hatred-reveals-significant.html</li>
<li>http://www.zohararad.com/2012/11/16/10-reasons-not-to-use-ruby/</li>
<li>http://drbacchus.com/geek-arrogance-and-chauvinism</li>
<li>http://blog.majesticseacreature.com/rubygems-nerd-rage-is-optional-and-discourage</li>
</ul>

<p>That main clique now running the roost are arrogant ingrates, rude and vindictive. They are utterly lacking in professionalism. I have no doubt some people will want to disagree --most of whom have not had enough interaction with these individuals to really know them. But enough people have seen it and have remarked on it.</p>

<p>https://gist.github.com/tenderlove/92f5a886fd9dafba1685</p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2013-28-February" title="February 28, 2013">February 28, 2013</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h1 class="title"><a href="/2013/01/04/the-plethora-of-version-versions/" rel="prefetch">The Plethora Of Version Versions</a></h1>
            <p><h1>The Plethora of Version Versions</h1>

<p>A couple of my programs have need of a Version API --a library for handling version numbers, and handling them well. Not only do they need a class modeling a <em>version number</em>, but also a <em>version constraint</em> and in one case even a <em>version conflict resolver</em> for requirements. Presently each project had its own code for handling versions. But as these projects have evolved it has became increasingly clear that effort was being wasted and that I should pull the separate bits of code together into a single gem on which they all could depend.</p>

<p>So I created the new project --actually it was some time ago, but I ran into that not-so-unusual snag, what to name it. Unfortunately there was already a <code>version</code> gem, and could think of no better name. So I put the whole thing on the back burner for some months. Today I finally returned to the question. I still don&#39;t have an answer, but to be thorough I searched of RubyGems.org using &quot;vers&quot;. I thought there were a lot of ANSI code gems!</p>

<ul>
<li><a href="https://github.com/Ataxo/app-version-git">app-version-git</a></li>
<li><a href="https://github.com/westarete/aversion">Aversion</a></li>
<li><a href="https://github.com/jeffp/gem_version">GemVersion</a></li>
<li><a href="https://github.com/Bodacious/per-version">PerVersion</a></li>
<li><a href="https://github.com/AlphaHydrae/rake-version">rake-version</a></li>
<li><a href="https://github.com/martinkozak/ruby-version">Ruby Version</a></li>
<li><a href="https://github.com/canton7/sem_version">SemVersion</a></li>
<li><a href="https://github.com/stouset/version">version</a></li>
<li><a href="https://github.com/jondot/version_bumper">version_bumper</a></li>
<li><a href="https://github.com/djsun/version_string">version_string</a></li>
<li><a href="https://github.com/RiverGlide/Versionary">Versionary</a></li>
<li><a href="https://github.com/charlotte-ruby/versionator">Versionator</a></li>
<li><a href="http://rubyforge.org/projects/versioncheck">VersionCheck</a></li>
<li><a href="https://github.com/chaione/versioner">versioner</a></li>
<li><a href="https://github.com/xaviervia/versionifier">Versionifier</a></li>
<li><a href="https://github.com/jcangas/version_info">VersionInfo</a></li>
<li><a href="http://rubygems.org/gems/versionize">Versionize</a></li>
<li><a href="https://github.com/thomasbiddle/versionr">Versionr</a></li>
<li><a href="https://github.com/defunkt/version_sorter">VersionSorter</a></li>
<li><a href="https://github.com/meh/versionub">Versionub</a></li>
</ul>

<p>The majority of these gems address the same functionality, that of bumping a version number. Some of those provide rake tasks to do so, others just the API, and a couple go a step further handling git commits and gem pushes as well. One a few actually focus on modeling a <em>version number</em>, though all have some sort of internal model no matter how simplistic. Only one appears to provide a model any more sophisticated than simple comparison and accessing named components (major, minor, patch, etc.). SemVersion also has simple constraint testing.</p>

<p>It&#39;s too bad there is not more cooperation among gem developers. I think this is an area in which the Perl community has shined. Surely in no small part to <a href="http://cpan.org">CPAN</a> and the culture of naming libraries functionally, rather then creatively. </p>

<p>Still doesn&#39;t help me name mine.</p>

<hr>

<p>Note <a href="https://github.com/phs/versionable">Versionable</a> is something different, and pretty neat.</p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2013-04-January" title="January 04, 2013">January 04, 2013</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h1 class="title"><a href="/2013/01/01/what-concerns/" rel="prefetch">What Concerns</a></h1>
            <p><h1>What Concerns?</h1>

<p>David Heinemeier Hansson, the well known creator of Rails, recently gave a little <a href="http://37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns">pep-talk</a> for the use of <code>ActiveSupport::Concerns</code>, making an argument that they were sufficient to satisfy the practical needs of <a href="http://en.wikipedia.org/wiki/Data,_context_and_interaction">DCI</a>&#39;s theory.</p>

<p>What he fails to explain is what Concerns <em>really are</em>. Truth be told, Concerns are essentially a extension of Ruby&#39;s <code>Module</code> class to more fully support <em>multiple inheritance</em>. Whether out of indifference, simple oversight or perhaps a bit of decorum to save Matz&#39;s sensitivities, who has a well known distaste for multiple inheritance, DHH never mentions this simple fact. Concerns are a way for Rails developers to include Modules with the same degree of functionality as inheriting from a superclass.</p>

<p>To say that Concerns are like DCI Roles, is akin to saying C structs are like OOP Objects. Yea, there&#39;s a similarity there, but it&#39;s vastly missing the point.</p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2013-01-January" title="January 01, 2013">January 01, 2013</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h1 class="title"><a href="/2012/12/04/about-those-refinements/" rel="prefetch">About Those Refinements</a></h1>
            <p><h1>About those Refinements</h1>

<p>Well, after a ridiculously long discussion about refinements, it&#39;s finally become clear what Matz is up to. It would have helped if he had mentioned from the start that he&#39;s patterning them directly off of Smalltalk wrappers and CLOS method combinations. Instead we get <a href="http://bugs.ruby-lang.org/projects/ruby-trunk/wiki/RefinementsSpec">this</a> &quot;offical&quot; spec. Hardly. It was only thanks to Charles Nutters careful <a href="https://bugs.ruby-lang.org/issues/4085#note-217">analysis</a> that I was able to to get a clear picture. Oh, the time and data that could have been saved!</p>

<p>So allow me to save you all the trouble and explain refinements in very simple phrase: <em>macros des méthodes</em>. In plain English, they are macros that act on method invocations. For example,</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">M</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">string</span><span class="p">(</span><span class="n">object</span><span class="p">)</span>
    <span class="n">string</span><span class="o">.</span><span class="n">to_s</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">module</span> <span class="nn">Q</span>
  <span class="n">refine</span> <span class="nb">String</span>
    <span class="k">def</span> <span class="nf">to_s</span>
      <span class="s2">&quot;Every string is </span><span class="si">#{</span><span class="k">super</span><span class="si">}</span><span class="s2">!&quot;</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">using</span> <span class="n">Q</span>

<span class="n">M</span><span class="o">.</span><span class="n">string</span><span class="p">(</span><span class="s2">&quot;okay&quot;</span><span class="p">)</span> <span class="c1">#=&gt; &quot;okay&quot;</span>
</code></pre></div>
<p>Notice, the <code>M.string</code> method is not effected by the refinement of <code>String#to_s</code> even though it uses <code>#to_s</code> in its definition. However, if we use <code>#to_s</code> explicitly in the scope of the refinement&#39;s use we get:</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="s2">&quot;okay&quot;</span><span class="o">.</span><span class="n">to_s</span> <span class="c1">#=&gt; &quot;Every string is okay!&quot;</span>
</code></pre></div>
<p>Even though that is exactly what the definition of <code>M.string</code> is, it produces the refined result instead. Since the call was explicit the refinement interceded.</p>

<p>That&#39;s really the crux of refinements. Most of the remaining questions pertain to the order in which multiple refinements interact, but it is all pretty much as one would intuit it to be, so we won&#39;t go into detail in that regard.</p>

<p>Now I thought it might be helpful to take an extreme example of what one could do with refinements and see if it leads us to anything interesting.</p>

<p>Let&#39;s take just a bare class.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Person</span>
<span class="k">end</span>
</code></pre></div>
<p>Now lets create two refinements defining two different roles a person might take.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">Buyer</span>
  <span class="n">refine</span> <span class="no">Person</span> <span class="k">do</span>
    <span class="kp">attr</span> <span class="ss">:stuff</span><span class="p">,</span> <span class="ss">:money</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="o">*</span><span class="n">stuff</span><span class="p">)</span>
      <span class="vi">@money</span> <span class="o">=</span> <span class="n">money</span><span class="o">.</span><span class="n">to_f</span>
      <span class="vi">@stuff</span> <span class="o">=</span> <span class="n">stuff</span>
    <span class="k">end</span>
    <span class="k">def</span> <span class="nf">buy</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span>
      <span class="vi">@stuff</span><span class="o">.</span><span class="n">push</span> <span class="n">product</span>
      <span class="vi">@money</span> <span class="o">-=</span> <span class="vi">@money</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">module</span> <span class="nn">Seller</span>
  <span class="n">refine</span> <span class="no">Person</span> <span class="k">do</span>
    <span class="kp">attr</span> <span class="ss">:stuff</span><span class="p">,</span> <span class="ss">:money</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="o">*</span><span class="n">stuff</span><span class="p">)</span>
      <span class="vi">@money</span> <span class="o">=</span> <span class="n">money</span><span class="o">.</span><span class="n">to_f</span>
      <span class="vi">@stuff</span> <span class="o">=</span> <span class="n">stuff</span>
    <span class="k">end</span>
    <span class="k">def</span> <span class="nf">sell</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span>
      <span class="vi">@stuff</span><span class="o">.</span><span class="n">delete</span> <span class="n">product</span>
      <span class="vi">@money</span> <span class="o">+=</span> <span class="vi">@money</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<p>Now let&#39;s define an activity in which persons interact as each of these roles.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="n">using</span> <span class="no">Seller</span>
<span class="n">using</span> <span class="no">Buyer</span>

<span class="k">class</span> <span class="nc">SalesTransaction</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">make</span><span class="p">(</span><span class="n">buyer</span><span class="p">,</span> <span class="n">seller</span><span class="p">,</span> <span class="n">product</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span>
    <span class="n">buyer</span><span class="o">.</span><span class="n">buy</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span>
    <span class="n">seller</span><span class="o">.</span><span class="n">sell</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<p>Interesting? Person has no built-in behavior, and yet we&#39;ve managed to use the class to model a sales transaction and give each person state of what they own and how much money they have. And an outside interface can&#39;t find this state out unless it knows what role to apply!</p>

<p>You might recognize the pattern of this example. It is <a href="http://en.wikipedia.org/wiki/Data,_context_and_interaction">DCI</a>. Does this mean refinements are a prefect fit for DCI-based designs? Might we see a whole new paradigm in Ruby architecture built around the DCI? That&#39;s a good question. At first glance it certainly seems to be possible. But we should note a obvious downsides.</p>

<ol>
<li>Both refinements required an <code>#initialize</code> method to ensure the instance variables are initialized. So  refinements of this kind would have to be compatible in this respect in order to be used together.</li>
<li>The context, in this case <code>SalesTransaction</code>, has to exist in it&#39;s own file so only the appropriate refinements apply. There is no way to define contexts that use different refinements in the same file because refinements are applied on a per-file basis. Although, some level of cleverness could be played if certain contexts simply add additional refinements on top of those used earlier in the file.</li>
<li>While it remains to be seen, it is unlikely that an entire system written in this fashion will be very fast. Nor is entirely certain the it would very comprehensible, but perhaps that has more to do with DCI then refinements.</li>
</ol>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2012-04-December" title="December 04, 2012">December 04, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h1 class="title"><a href="/2012/12/01/bye-bye-webri/" rel="prefetch">Bye Bye Webri</a></h1>
            <p><h1>Bye Bye WebRI</h1>

<p>RDoc 4.0 is coming out and it can now render documentation directly from ri stores. That&#39;s super great news. I had written just such a program back in 2008 called WebRI. It was a terrible hack, and slow as molasses running up a tree. So it never got much use. But it was still pretty neat because it made it possible to browse all installed gems in one go. It was wild to see every single class and module of every gem listed in the side pane. I hope RDoc 4.0 will be able to do something like that. Even so I am certain it will be better in just about every other way. My implementation may have sucked, but the idea was obviously a good one. It&#39;s always nice to feel a bit of vindication in that way.</p>

<p><img src="http://trans.github.com/media/webri.png" alt="WebRI"></p>

<p>Of course, this also means that WebRI is completely obsolete now. Come the new year I will delete the repository and yank the gem. No reason to keep useless cruft about.</p>

<p>BTW As of next year I will have been programming in Ruby for over a decade. Ten fucking years!</p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2012-01-December" title="December 01, 2012">December 01, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h1 class="title"><a href="/2012/08/07/Going-Generic/" rel="prefetch">Going Generic</a></h1>
            <p><h1>Going Generic</h1>

<p>My Grandmother will often buy generic brands at the grocery to save a few dollars. A child of the depression, she knows the true value of a thing[^1]. Go could take a lesson from her.</p>

<p>Let me provide an example. Here is code to concat two array of string.[^2]</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">func concat(a, b []string) []string {
  ret := make([]string, len(a) + len(b))
  copy(ret, a)
  copy(ret[len(a):], b)
  return ret
}
</code></pre></div>
<p>It can only be used for []string values. Nothing else. If I need to concat two int arrays, well then I need another function.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">func concat(a, b []int) []int {
  ret := make([]int, len(a) + len(b))
  copy(ret, a)
  copy(ret[len(a):], b)
  return ret
}
</code></pre></div>
<p>There is no difference between these two functions except the array&#39;s element type. Ideally a general solution would allow use to name the type, e.g.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">func concat(a, b []&lt;t&gt;) []&lt;t&gt; {
  ret := make([]&lt;t&gt;, len(a) + len(b))
  copy(ret, a)
  copy(ret[len(a):], b)
  return ret
}
</code></pre></div>
<p>From what I have heard there are some strict criteria to be met for any general solution to this issue. I plan to do some further reading.</p>

<p>[^1]: Sometimes too much so actually. Of an emptied product container she&#39;ll often say, &quot;this is fine container, surely you must have something you can put in it&quot;. :)</p>

<p>[^2]:  Yes, there is simpler way to concat two arrays, i.e. <code>append(a1, a2...)</code>, but the concat function makes for a clear example of the generics issue. The specific functionality is not important.</p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2012-07-August" title="August 07, 2012">August 07, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h1 class="title"><a href="/2012/07/04/crossing-the-assets-divide/" rel="prefetch">Crossing The Assets Divide</a></h1>
            <p><h1>Crossing the Assets Divide</h1>

<p>Working on <a href="http://github.com/rubyworks/smeagol">Smeagol</a>, a read-only Gollum server and static site generator, I&#39;ve come across an unusual issue. One of the features Smeagol provides is the ability to view page history. By providing a git commit-id or a tag name in the URL, an older version of any page can be viewed. Now, if a page includes a local asset, an image being the typical example, that file clearly must come from the same commit as well. And here is were a problem arises. While <em>content assets</em> must be versioned, <em>design assets</em> must not. We may want to look at the content of an old page for historical reference; we don&#39;t want look at it as if on the website as it was designed way back when. Indeed, the functionality of the site back then might have had bugs in it, it might have a had a very stark layout, it might have any number of issues which have since been corrected. Certainly the site should not serve up old stylesheets, javascripts, background images and the like. Only old <em>content</em> must be served.</p>

<p>As it has become the fashion in web-design, stylesheets, javascripts, images, and so on are placed in a single <code>assets/</code> directory. (Even without an <code>assets/</code> directory, asset files are generally placed in central bins such as <code>images/</code>.)  Because of this there is no straight forward way to determine which files are for content and which are for site design. So, as it happens, there turns out to be a need to divide the assets in two. One directory for design and another for content.</p>

<p>I now find myself with the unenviable decision of what to name these two directories. Do I keep <code>assets/</code> for design or content? And what do I name the other directory? Or should I use two new names altogether?</p>

<p>[UPDATE] At present I have opted to keep <code>assets/</code> for design-related files and move content assets to <code>media/</code>. Technically, it turns out that it doesn&#39;t matter where the content files go as long as it is not in <code>assets/</code>. </p>
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2012-04-July" title="July 04, 2012">July 04, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h1 class="title"><a href="/2012/06/26/Example/" rel="prefetch">Example</a></h1>
            <p><h1>Example</h1>

<p>This is an example. I am wondering how this gets saved.</p>

<!-- Comment
Can we hide things this way?
-->
</p>
            <div class="meta">
                Written By <address></a> &mdash;
                <time pubdate datetime="2012-26-June" title="June 26, 2012">June 26, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
    <section class="pagination" style="text-align:center">
      
        
        <a href="/" class="btn btn-outline">‹ Newer</a>
        
      
      
        <a href="/page3" class="btn btn-outline">Older ›</a>
      
    </section>
</article>


<footer class="site-footer">
    <div class="container">
        &copy; 2014 
        
        <nav>
            <a href="http://transcode.github.com">TRANS</a> &middot;
            <a href="/">Blog</a> &middot;
            <a href="http://github.com/trans">Product</a> &middot; 
            <a href="/About/">About</a>
        </nav>
        
        <nav class="social">
            
            <a href="https://twitter.com/transgigamic" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter black"></i></a>
            
                
            <a href="/feed.xml" title="RSS Feed">
                <i class="icon icon-rss black"></i>
            </a>
        </nav>
        <p>Incorporated theme by <a href="https://sendtoinc.com">Inc</a></p>
    </div>
</footer>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/assets/main.js"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<script>
    (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = '//hnbutton.appspot.com/static/hn.min.js';
        s.parentNode.insertBefore(g, s);
    }(document, 'script'));
</script>


</body>
</html>
