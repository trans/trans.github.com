<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRANSCODE &mdash; Trans Technology and Programming Blog</title>
    <link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/assets/main.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/images/logo.png"/>
    <link href="/feed.xml" rel="alternate" type="application/rss+xml" title="TRANSCODE" />
    <meta name="title" content="TRANSCODE">
    <link rel="canonical" href="http://trans.github.com/">
     
           
    <meta property="og:title" content="TRANSCODE"/>
    <meta property="og:url" content="http://trans.github.com/"/>
    
    
    <meta property="og:site_name" content="TRANSCODE">
</head>
<body>
    
<section class="site-nav">
    <header>
        <nav id="navigation">
            <a class="brand" href="/">
                <img src="/images/logo.png" alt="Inc">
            </a>
            <a href="/" class="home">Blog</a>
            <a href="http://incorporated.sendtoinc.com/">Product</a>
            <a href="https://tabcomputing.com/about/">About</a>
        </nav>
        <nav class="tagline">
            <span>Get a modern blog for your company</span>
            <a href="http://incorporated.sendtoinc.com/" class="btn btn-outline">Learn More</a>
        </nav>
    </header>
</section>

<div class="blog-cover" style="background-image:url(/images/blog-cover.jpg);">
    
    <section>
        <div class="container">
            <h1>TRANSCODE</h1>
            <h3>Trans Technology and Programming Blog</h3>
        
            
            
            <a href="/feed.xml" title="RSS Feed">
                <i class="icon icon-rss"></i>
            </a>
        </div>
    </section>
</div>

<article class="container">

  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/2014/03/29/Next-Level-Please/" rel="prefetch">Ruby AOP Made Simple</a></h2>
            <p><p>What I want my computer to do the following:</p>

<ul>
<li>Authenticate id</li>
<li>Manage privacy</li>
<li>Tell time and keep a calendar

<ul>
<li>Set reminders and alarms</li>
</ul></li>
<li>Provide weather report(s)</li>
<li>Map w/ Global positioning</li>
<li>Messaging (Text and Email)</li>
<li>Translate other languages</li>
<li>Search and Surf Internet</li>
<li>File Manager (Advanced)</li>
<li>Play music (personal and internet stations)</li>
<li>Show pictures

<ul>
<li>Multiple i/o Dropbox, Google Drive, Local ?</li>
</ul></li>
</ul>

<p>Premium modules</p>

<ul>
<li>Edit Photos</li>
<li>Vector Drawing (has own tools interface)</li>
</ul>

<h2>Interface</h2>

<p>Everything should be voice driven. Voice commands are translated into a set of objectives. The user can see these objectives in simple command form and decide if it is acceptable. </p>

<h2>Implementation</h2>

<p>Each module shall be written to a shared interchange specification. 
Messages are sent via JSON (or JSONP) and results received.
Some results contain caching <em>functors</em> which perform the same function as the original call.
The cache allows light-weight functionality to be hosted cost-effectively, without bandwidth saturation.</p>

<p>So for example, say I want to provide a photo effect algorithm.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">---
input:
  - uri: *.jpg *.png
  - return-type:
output:
  - File .jpg .png
</code></pre></div></p>
            <div class="meta">
                Written By <address>trans</a> &mdash;
                <time pubdate datetime="2014-29-March" title="March 29, 2014">March 29, 2014</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/2013/09/04/Revelation-Knowledge/" rel="prefetch">Ruby AOP Made Simple</a></h2>
            <p><p>I just had a revelation about programming languages.</p>

<p>Coming into this project, my primary goal was to rate a Forth derivative, that added types, polymorphism and functional-orientation to the language. That goal is proceeded reasonably well. However, in the course of thinking about all the varying aspects of the design I hit upon a very interesting concept. I asked, &quot;What does the computer know?&quot; In other words, how are we really informing the computer about our systems as we program. It only stands the reason that the more the computer knows the more we easily we can communicate our intent.</p>

<p>So lets start with the bread and butter the algorithm, and seeing that we want to stay in the realm of functional-programming ultimately will strictly speak of functions. But to proceed, lets get our barrings by asking what other languages tell the computer about such these things, whether they be procedures, functions or methods.</p>

<p>Forth is probably the most basic in this regard of all languages, with the exception of Assembly. It doesn&#39;t tell the computer anything at all about a <em>word</em> (Forth&#39;s term for these things) other then the procedure by which it is calculated. Some Forth words provide terse stack diagrams but they are simply comments, ignored by the computer.</p>

<p>Other languages, like Ruby, are essentially the same as Forth. Ruby is a dynamic language, so it doesn&#39;t provide types for method arguments. To a limited degree names are provided for them, but they are promptly thrown away by the interpretor, so the computer is no more knowledgeable in that regard either. We do get one piece of extra information though. We can ask Ruby what the arity of a method is.</p>

<p>Python takes us a tad step further with regards the argument names. One can pass arguments to a method by name. That&#39;s an improvement, but that&#39;s about as far as it goes.</p>

<p>On the other side of things, there are languages like Java which are very strictly typed. But the types do little more than inform the compiler how to do it&#39;s job better. In the language itself we can&#39;t really ask about them. The names of the parameters are still ultimately disposable to the computer. (I wouldn&#39;t be surprised if there is some insanely complicate reflection library out there for Java that would make some of this possible, but regardless it is not part of the <em>real</em> language.)</p>

<p>Then there are languages like Haskell which are strictly typed and can tell us all about those types. </p>

<p>Haskell&#39;s about the state of the art at this point. There isn&#39;t a language I know of that informs the computer more about it&#39;s functions.</p>

<p>So then I asked, what would be a <em>knowledgeable design</em> such that the computer would know about these things we computers use day in and day out, and really be able to converse with us about them, so to speak.
Well, lets break it down. What is there to know about a function?</p>

<ul>
<li>Arity</li>
<li>Types of the arguments</li>
<li>Types of the return values</li>
<li>Name of the function</li>
<li>Name of the arguments</li>
<li>Definition of the function</li>
</ul>

<p>Beside these, it may even behoove us to inform the computer about aliases for the various names, so it is easier to talk about these things for different programmers who might not be as with the code, or just to give us some programmer to speak more naturally, rather than always being so tortured to use the exact term.</p>

<p>Lets try and example, by writing out some pseudo-code for a function. Let&#39;s keep it simple, say, calculating the tip for a check.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">function tip(amount, percentage)
  typeof amount Currency
  typeof percentage Float

  default amount $0
  default percentage 20%

  aliases percentage percent pnct pct
  aliases amount price cost

  definition amount * percentage

  return-type Currency
end

aliases tip gratuity
</code></pre></div>
<p>But notice we also said &quot;tip <em>for a check</em>&quot;. That means something, so in our pseudo-code lets try to express that.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">context tip check

aliases check bill
</code></pre></div>
<p>Okay. So what do we have after all that? Well, at the very least we have a way to speak to the computer about the various parts of our function.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">tip.parameters  =&gt; [amount, percentage]
tip.return_type =&gt; Currency
tip.parameter(amount).type  =&gt; Currency
tip.parameter(pcnt).default =&gt; 20%
</code></pre></div>
<p>And so on. We can also call the function of course, but we could do so in unique way now. We can do it in an object-oriented way. After we do have a <em>thing</em> that is our function.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">mytip = new tip
mytip.amount = $100.00
mytip.return  =&gt; $20
</code></pre></div>
<p>Now in the larger scheme of things, if that is all there were it might not get us too much further than the programming languages we mentioned above. But, we might now be able take all this new found knowledge granted to the computer about our program and start asking it to do some things we might normally do ourself.</p>

<p>For example, lets describe to the computer the concept of paying for lunch.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">function pay(bill, tender)
  type bill Bill
  type tender Currency
  definition
    tender - (tally + gratuity(pcnt: 20%))  # this right here!
  return-name change 
  type change Currency

object Bill(menu-items, tax)
  type menu-items List(Product)
  type tax Percentage

function tally(bill)
  type bill Bill
  definition
     net = sum(bill.menu_items.each.cost) 
     net + net * tax
  aliases tally price cost
  return-type Currency

object Product(name, price)
  aliases price cost
  type name String
  type price Currency
</code></pre></div>
<p>Look closely at the line <code>tally + gratuity</code>. Notice we didn&#39;t say <code>bill.tally + tip(bill.tally)</code>. Not I know my pseudo code doesn&#39;t really get us to the point where it&#39;s clear how we can be so concise. But I think the basic notion is there. The idea is that by explicitly defining the various parts of our model, drawing relationships between those parts via aliases then the computer itself can start to make the connections between the return values and the input parameters for us.</p>

<p>I suspect if this kind of approach is taken to it&#39;s natural conclusion, it should ultimately allow us to write much more reusable code, write that code in a much more natural and information rich manner.</p>

<p>Taking a step back, I believe it would be too much of undertaking for me to endeavor upon at this point. Nonetheless it does move me in a smarter direction with March --to make the language more knowledgeable.</p>
</p>
            <div class="meta">
                Written By <address>trans</a> &mdash;
                <time pubdate datetime="2013-04-September" title="September 04, 2013">September 04, 2013</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/2013/08/06/Should-You-Go/" rel="prefetch">Ruby AOP Made Simple</a></h2>
            <p><h1>Should You Go?</h1>

<p><strong>2012-080-06 [DRAFT]</strong></p>

<h2>Preface</h2>

<p>I&#39;ve been working on a (somewhat esoteric) IME for Android over that last couple of years and recently I decided to automate part of my design process. I had been manually evaluating keyboard layouts for ergonomic quality. After expending so much time and energy into evaluating one layout after another, trying to ascertain which is optimal in my mind without coming to any firm conclusion, I decided something had to give. And so I did what a coder does best: I wrote a program to figure it out for me. The idea was straight forward. I would codify the principles by which an ergonomic layout is to be judged, assign a score to each of those principles, and then have the computer shuffle through every permutation to find the one with the highest score.</p>

<p>Thanks to its elegance and my high fluency in Ruby, I was able to whip out an initial working program in a few hours, and by the end of the day I was getting useful results. Unfortunately there was a problem. It was <em>Way Too Slow</em>. The first culprit, it become clear, was that a brute force search wasn&#39;t going to suffice. There were simply too many possibilities. To remedy that I added a simple genetic algorithm and seeded it with an initial population of layouts I already knew to be pretty good. That helped a lot, but it was still <em>Way Too Slow</em>. So then I decide to turn this new problem into an opportunity. And that&#39;s where this story gets interesting...</p>

<h2>Learning Go</h2>

<p>I&#39;ve been wanting to learn a new modern programming language for a while. Having a relatively small yet substantial problem to solve made for the perfect excuse. After doing some research on Go, Julia, Haskell, Erlang and Elixir --all languages I expected to offer me a nice bump in speed (wait, isn&#39;t that just about any language compared to Ruby?) I narrowed my choices to Elixir and Go. I choose Elixir because it was a <em>functional language</em> but borrowed much of it&#39;s syntax from Ruby. That would make the transition easier. And I choose Go because it was a lower-level language, potentially offering the greatest speed gain. I&#39;ve always hated C and I will never endeavor to be proficient in it. But Go presents a much more approachable way to program that is fairly close to the metal like C. So I am pretty tickled by its prospects. I dived into the Elixir first, but I will save my thoughts on Elixir for a future post. The rest of this article will cover my initial thoughts on Go.</p>

<h2>Initial Impression</h2>

<p>If I were to sum things up as concisely as possible I would say this about Go: &quot;The really good thing about Go is that there is so little to it. The really bad thing about Go is that there is so little to it.&quot; That is very accurate. In Go, I had to write a function to scan an <em>array of string</em> for members. I stress &quot;array of string&quot;, because, you guessed it, one would have to write a completely separate function for <em>array of int</em>. Go has no general functions. Every function is type specific to its very bones. Many a questions on the golang-nuts mailing list ends with the post &quot;There is no general solution...&quot;. It really does seem crazy how many hoops one has to jump through to get things done. What would be a clear one-liner in Ruby, well, it will take at least a handful of lines in Go. In the future, I truly expect to hear old-time Go coders swapping legends about maintaining million lines of code. (Just like old times!)</p>

<p>But!!! (<em>triple exclamation</em>) There is a silver lining. As awful as all that sounds, the downright <em>simplisticness</em>(TM) of Go does have two really great benefits. First, there isn&#39;t much to learn with respect to the language itself. It literally takes a day to learn the basic constructs and to get up and running at a pretty good clip. Secondly, because every itty-bitty routine must be coded there is hardly any doubt as to exactly what the code is doing and there is plenty of room for optimization all along the way. This is one of the things that makes Go code so fast. Granted it leaves room for a poor coder to write less than optimal code too, but Go Trusts You. On the whole the extreme simplicity of the language is a net positive.</p>

<p>Beyond that, coding in Go was fairly comfortable. The syntax is actually harder to read than it is write, as strange as that sounds. After writing Go code for just for a short while, it starts to feel very natural, which probably accounts for why I was able to write my program in just over a day, despite never having written a lick of Go before. In particular I have to give props to Go&#39;s <code>for</code> loop construction. The whole <code>for i, x := range anarray { ... }</code> thing makes writing most loops a breeze.</p>

<h2>Case-for-Visibility</h2>

<p>One reason the code might be a little hard to read is Go&#39;s use of function name capitalization to &quot;export&quot; a package&#39;s public interface. There is a part of me that wants to agree with other that this is stroke of Genius. Many Rubyists feel the same about the capitalization of Class names. However, when ever I see capitalization being made significant in a language a little red flag goes off in the back of my head. Upon a more tempered consideration, it is perhaps easy to see why. The designers <a href="http://golang.org/doc/faq#unicode_identifiers">admit</a> this is an issue for those who code in certain foreign languages. But they also say, &quot;the case-for-visibility rule is unlikely to change however; it&#39;s one of our favorite features of Go.&quot; It would seem the designers might need a lesson on the <a href="http://www.fastcompany.com/1802659/letter-editor-adrien-brody-rule">Adrien Brody Rule</a>. If it were only a convention it might be passable. But forcing it is really unacceptable for wider use as a global programming language. And personally, after the initial coolness wore off, I began to think it just looks bad. Alongside Go&#39;s CamelCase convention (and you kind of have to do that once you require capitalization), you end up with  somewhat ugly, &quot;Visually Basic&quot; looking code. Clearly they missed the Ruby memo: When it comes to readability, <code>foo.make_something_good</code> beats <code>foo.MakeSomethingGood</code>.</p>

<h2>Project Structure</h2>

<p>Another significant issue with Go is its standard project structure. Essentially it pushes the <em>one giant workspace</em> approach to development (see http://golang.org/doc/code.html). That might make sense for a software development house, but for other types of coders that is really not acceptable. I sometimes have projects where the code is just an auxiliary aspect. The project could have presentations, spreadsheets, word documents, etc. If there is code associated with the project it needs to reside alongside these other documents and not be handicapped for doing so. Currently the only way I see for doing this is to adjust the $GOPATH every time I work on such a project. No fun. Hopefully there is a better way yet too be discovered, or that the Go designers will eventually provide.</p>

<h2>Debugging</h2>

<p>From what I thus surmise about the tools provided for Go, I have only scratched the surface of what is available. But I can say that one the best things about working with Go were the very clear and directory error reports. By default, at least, Go doesn&#39;t fill the screen with stack traces and code snippets. Rather is simply states the problem in plain English and give the file and line number where it arose. The clarity of the error messages made it very easy to correct every issue detected by the compiler.</p>

<h2>Documentation</h2>

<p>With regards to documentation, I have to give Go a push. What is available is still quite weak. However, given how new the language is, the current state of documentation is actually rather commendable. With its growing popularity, clearly this is a situation that will improve rapidly.</p>

<p>Einstein had a saying, &quot;Everything should be made as simple as possible, but not simpler&quot;. In some respects, such as the generics issue, Go has made things <em>too</em> simple. If Go&#39;s designers ultimately find a way to support generics --and by all accounts they are at least <a href="http://golang.org/doc/faq#generics">open to the prospect</a>, the language would become much more accessible. And some of this critique will be mitigated. But despite it&#39;s over simplification, it beats the pants off the converse issue over complexification, which we too often find in other languages.</p>

<p>Go is the best new language to come along since I learned Ruby in 2002. I think anyone still coding C when it&#39;s not absolutely necessary, is just a glutton for punishment. I highly recommend you Go, and Go now.</p>
</p>
            <div class="meta">
                Written By <address>trans</a> &mdash;
                <time pubdate datetime="2013-06-August" title="August 06, 2013">August 06, 2013</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/2013/02/28/the-end-of-ruby/" rel="prefetch">Ruby AOP Made Simple</a></h2>
            <p><h1>The End of Ruby</h1>

<p>I have given 10 years of my life to Ruby. And in return I have been ridiculed, mocked, cussed at, laughed at, shunned, harassed, ignored and all but excommunicated from the Ruby community. And all for nothing more than trying to be a helpful and constructive part of it. </p>

<p>Let me be clear. I am not a saint. Lord knows I can get emotional and put my foot squarely in my mouth at times. I have not always been the nicest guy. But I can tell you I have tried to be, and when I haven&#39;t it has been in reaction to others poor behaviour. And when I have found myself going too far I apologize. I don&#39;t hold grudges, I am gracious about being proven wrong and I always work with people as professionally as I can, even with people I basically can&#39;t stand (b/c of the way they have treated me).</p>

<p>I suppose it all started with GUtopIa. Long ago, when I first learned Ruby I wanted to create a very cool Ruby GUI that provided an unified interface to any GUI back-end (Gnome/GTK, KDE/Qt, Fox, tcl/tk, etc.) Some others were enthused about the project and we began to discuss privately. Having initiated the project I just assumed a leadership roll and began working out how to proceed. At the time I didn&#39;t really understand that I was in over my head (I was decent procedural programmer, but had zero OOP nor Agile experience.) This presumption irked a few a people and Rich Kilmer emailed me a lovely message letting me know that they &quot;did not work&quot; for me. I was a bit taken aback. I did not mean to come off that way and apologized, but it was too late. They informed me that they would be working a WxWidgets binding instead. It was a valuable lesson. And while I would like to think my apology was accepted, those initial ill feelings could have carried on into the community. I have no way to know. </p>

<p>Other then a few sometimes mildly heated arguments. I imagine some people disliked me b/c I was willing to argue a point in great detail and at length. I can see how that would be frustrating on the other end. But among those individuals --David Black, Ara Howard, Austin Ziegler, Guy Wright, and so on, despite what they might have felt about me personally, they maintained a high level of professionalism, put heated debates in proper context and moved on cooperatively with the shared of endeavour of being and becoming great Rubyists.</p>

<p>Bu then there was Ryan Davis. The first thing Ryan Davis ever said about me (AFAIK) was a <a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/215440">slander</a> of my first two Ruby projects.</p>

<blockquote>
<p>&quot;No, I never looked at reap. I wouldn&#39;t touch it or facets with someone else&#39;s ten foot pole.&quot;</p>
</blockquote>

<p>Sounds like an objective point of view, doesn&#39;t it? He hadn&#39;t even looked at the project but he knew he wouldn&#39;t touch it. Why the prejudice? I had no idea. But I would later come to understand that it actually had nothing to do with code. Reap and Facets were the first two open-source projects I had ever attempted to personally maintain in my life, and at that time they hadn&#39;t been out long. Both were early in their 0.x series of release. So I accepted the criticism, despite its nonconstructive form and worked to make my projects better. And with time, the quality and quantity of project continued to improve. But the way I was treated did not.</p>

<p>I submitted a patch to RubyGems once to allow a list of resource links in the gemspec, e.g. <code>home</code>, <code>docs</code>, <code>wiki</code>, <code>issues</code>, etc. Ryan did nothing but tear it apart, offering little in the way of constructive advice, but spilling slurs and curse words throughout his line by line &quot;critique&quot;. When I responded --in order to have a <em>dialog</em> about why I coded things the way I did, he only became more vitriolic. A comment he posted, containing a dialogue he had with a colleague of his (most likely Aaron Patterson), in some ill attempt to justify his behaviour:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">5:13:17 PM Professor: he tried to defend every single one
5:13:26 PM Professor: none of them he went &quot;ok, thats fine, i&#39;ll do it that way&quot;
5:13:28 PM zenspider: he needs to learn how the fuck to take critiques
</code></pre></div>
<p>It would seem he and his company think dialog is nothing more than a questioning of their authority.
Perhaps it would seem ironic then that once again I did accept every critique (that is the actual ones which were mostly provided by Eric Hodel), whether I agreed with it or not (I had no avenue for discussing it), and made a <a href="https://github.com/rubygems/rubygems/pull/15">new patch</a> that addressed every point. And though I specifically asked that anyone but Ryan Davis review it, I and the patch were ignored. Months later the request was closed with only a small comment from Ryan Davis, &quot;Looks like this is dead.&quot; To this day the gemspec does not support links, and one must still enter them by hand on rubygems.org.</p>

<p>Eventually I learned that Ryan Davis and Aaron Patterson are co-workers, and along with Eric Hodel they are the leading members of a club called <a href="">Seattle.rb</a>. While greatly gifted as developers, they are also notoriously arrogant. They have demonstrated this time and again and in numerous ways. From simply failing to comment their code to ganging up on some poor coder just trying to be constructive. One of their favourite tactics is to gang up on others, making it look like independent analysis through the visor of the Internet, when in fact it is per-determined plan. Unfortunately this group has systematically taken over much, if not most, of Ruby&#39;s development. They hold great power over MRI now, and they control most of the major projects of the standard library --RubyGems, Nokogiri, Psych, RDoc, etc.</p>

<p>&quot;But what about Matz?&quot; I hear you ask. &quot;Surely he remains in firm control?&quot; Every one knows Matz is a nice guy, and that is true. Matz has always been a nice guy. But Matz has also always been a very passive personality. No one is perfectly nice. So I suspect Matz&#39; outlet is classic passive-aggressive behaviour. A good example of this is his complete avoidance of the <a href="https://bugs.ruby-lang.org/issues/7716">autoload issue</a>. Even though he announced over a year ago that &quot;autoload will be dead&quot;, none of the code in the standard lib has made any changes to remove it. When asked, the maintainers said they had no plans to do so. I have been asking for <em>five years</em> for the simplest of patches to fix this issue --I even submitted a patch myself and I am not a C coder, but never has it been addressed. I have email Matz directly and received no response. To this day I have at least three programs that can not be fully utilized because of it. So, a nice as Matz might be, he lacks the requisite character to be a strong leader to enforce professionalism among those he deem technically merited to work on Ruby. </p>

<p>...</p>

<p>The last straw..</p>

<p>Sometime ago I improved the design of FileUtils a good bit and <a href="https://bugs.ruby-lang.org/issues/4970">submitted a patch</a> to ruby-core. I did so because Ruby Facets adds a couple of extensions to FileUtils, and they way the code had been written made it very cumbersome to do so properly. The patch was review and accepted.</p>

<p>Last week Eric Hodel found an subtle bug in the code --none of the tests caught it. The problem was easy enough to ascertain and to fix. I actually offered an idea for a solution that would actually make the code even better. Again there was no dialog. I was ignored. Eric sanctimoniously appointed himself maintainer for fileutils.rb and decided to revert all the improvements back to the old code. Despite the fact that the new code already went out with Ruby 2.0 preview release (so much for &quot;feature freezes&quot;). Despite the fact the the new code is far superior to the old (<a href="http://bugs.ruby-lang.org/projects/ruby-trunk/repository/revisions/39544/diff/lib/fileutils.rb">compare for yourself</a>). And despite my objections. There is only one reason Eric reverted that code. To spite me. </p>

<p>He would deny it, of course. But the evidence is clear enough. Why no dialog? Why such a drastic reversion of clearly improved code that passes all tests? Why was Aaron the only other person to comment with out any constructive thing to say, just a &quot;yea do it&quot;. Taken in conjunction with the combined history of this groups persecution of me, the answer is obvious.</p>

<p>When a project begins reverting released code solely on the basis of personal vindictiveness, that project is on a fast track to doom. Ruby has become such a project. I am not the <a href="http://news.cnet.com/8301-13846_3-9838477-62.html">first to see it</a>, or the first to <a href="http://www.rubyinside.com/why-the-lucky-stiff-is-missing-2278.html">react to it</a>, and comments about it are only increasing.</p>

<ul>
<li>http://www.jperla.com/blog/post/ruby-is-a-ghetto</li>
<li>http://gilesbowkett.blogspot.com/2013/02/nodejs-hatred-reveals-significant.html</li>
<li>http://www.zohararad.com/2012/11/16/10-reasons-not-to-use-ruby/</li>
<li>http://drbacchus.com/geek-arrogance-and-chauvinism</li>
<li>http://blog.majesticseacreature.com/rubygems-nerd-rage-is-optional-and-discourage</li>
</ul>

<p>That main clique now running the roost are arrogant ingrates, rude and vindictive. They are utterly lacking in professionalism. I have no doubt some people will want to disagree --most of whom have not had enough interaction with these individuals to really know them. But enough people have seen it and have remarked on it.</p>

<p>https://gist.github.com/tenderlove/92f5a886fd9dafba1685</p>
</p>
            <div class="meta">
                Written By <address>trans</a> &mdash;
                <time pubdate datetime="2013-28-February" title="February 28, 2013">February 28, 2013</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/2013/01/04/the-plethora-of-version-versions/" rel="prefetch">Ruby AOP Made Simple</a></h2>
            <p><h1>The Plethora of Version Versions</h1>

<p>A couple of my programs have need of a Version API --a library for handling version numbers, and handling them well. Not only do they need a class modeling a <em>version number</em>, but also a <em>version constraint</em> and in one case even a <em>version conflict resolver</em> for requirements. Presently each project had its own code for handling versions. But as these projects have evolved it has became increasingly clear that effort was being wasted and that I should pull the separate bits of code together into a single gem on which they all could depend.</p>

<p>So I created the new project --actually it was some time ago, but I ran into that not-so-unusual snag, what to name it. Unfortunately there was already a <code>version</code> gem, and could think of no better name. So I put the whole thing on the back burner for some months. Today I finally returned to the question. I still don&#39;t have an answer, but to be thorough I searched of RubyGems.org using &quot;vers&quot;. I thought there were a lot of ANSI code gems!</p>

<ul>
<li><a href="https://github.com/Ataxo/app-version-git">app-version-git</a></li>
<li><a href="https://github.com/westarete/aversion">Aversion</a></li>
<li><a href="https://github.com/jeffp/gem_version">GemVersion</a></li>
<li><a href="https://github.com/Bodacious/per-version">PerVersion</a></li>
<li><a href="https://github.com/AlphaHydrae/rake-version">rake-version</a></li>
<li><a href="https://github.com/martinkozak/ruby-version">Ruby Version</a></li>
<li><a href="https://github.com/canton7/sem_version">SemVersion</a></li>
<li><a href="https://github.com/stouset/version">version</a></li>
<li><a href="https://github.com/jondot/version_bumper">version_bumper</a></li>
<li><a href="https://github.com/djsun/version_string">version_string</a></li>
<li><a href="https://github.com/RiverGlide/Versionary">Versionary</a></li>
<li><a href="https://github.com/charlotte-ruby/versionator">Versionator</a></li>
<li><a href="http://rubyforge.org/projects/versioncheck">VersionCheck</a></li>
<li><a href="https://github.com/chaione/versioner">versioner</a></li>
<li><a href="https://github.com/xaviervia/versionifier">Versionifier</a></li>
<li><a href="https://github.com/jcangas/version_info">VersionInfo</a></li>
<li><a href="http://rubygems.org/gems/versionize">Versionize</a></li>
<li><a href="https://github.com/thomasbiddle/versionr">Versionr</a></li>
<li><a href="https://github.com/defunkt/version_sorter">VersionSorter</a></li>
<li><a href="https://github.com/meh/versionub">Versionub</a></li>
</ul>

<p>The majority of these gems address the same functionality, that of bumping a version number. Some of those provide rake tasks to do so, others just the API, and a couple go a step further handling git commits and gem pushes as well. One a few actually focus on modeling a <em>version number</em>, though all have some sort of internal model no matter how simplistic. Only one appears to provide a model any more sophisticated than simple comparison and accessing named components (major, minor, patch, etc.). SemVersion also has simple constraint testing.</p>

<p>It&#39;s too bad there is not more cooperation among gem developers. I think this is an area in which the Perl community has shined. Surely in no small part to <a href="http://cpan.org">CPAN</a> and the culture of naming libraries functionally, rather then creatively. </p>

<p>Still doesn&#39;t help me name mine.</p>

<hr>

<p>Note <a href="https://github.com/phs/versionable">Versionable</a> is something different, and pretty neat.</p>
</p>
            <div class="meta">
                Written By <address>trans</a> &mdash;
                <time pubdate datetime="2013-04-January" title="January 04, 2013">January 04, 2013</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/2012/06/26/Example/" rel="prefetch">Ruby AOP Made Simple</a></h2>
            <p><h1>Example</h1>

<p>This is an example. I am wondering how this gets saved.</p>

<!-- Comment
Can we hide things this way?
-->
</p>
            <div class="meta">
                Written By <address>trans</a> &mdash;
                <time pubdate datetime="2012-26-June" title="June 26, 2012">June 26, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/2012/06/14/autoload-smells-like-denmark/" rel="prefetch">Ruby AOP Made Simple</a></h2>
            <p><h1>Autoload Smells Like Denmark</h1>

<p>Ruby has a very cool feature called <em>autoload</em>. With autoload, any undefined constant can automatically trigger the loading of a library file. Effectively this gives Ruby a convenient means of lazy loading. For example, lets say some of our app&#39;s executable scripts ultimately use the ANSI library, but others do not. We can use <code>autoload</code> to only load the ANSI library when it is needed.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="nb">autoload</span> <span class="no">ANSI</span><span class="p">,</span> <span class="s1">&#39;ansi&#39;</span>
</code></pre></div>
<p>This says to <code>require &quot;ansi&quot;</code> the first time an undefined ANSI constant is encountered.</p>

<p>As wonderful as autoload seems, it has too glaring issues: 1) It doesn&#39;t use standard Kernel#require and 2) It is not thread safe. </p>

<p>For the first, this means that any overriding of #require will not be supported by autoload. Of course such a thing is very rare, but it does occur. For instance the <a href="https://rubygems.org/gems/roll">Roll</a> library is all about overriding <code>#require</code>. Also RubyGems overrides #require, and in fact one can cause a bug to occur when using autoload because of it. Here&#39;s a very simple <a href="http://stackoverflow.com/questions/849622/autoload-raises-an-error-but-require-does-not-ruby">example</a>.</p>

<p>On the second case the issue seems much more complicated, and a solution seems so unlikely that Matz has called for #autoload to be <a href="http://bugs.ruby-lang.org/issues/5653">removed</a> from Ruby by v3.0.0. That&#39;s a long way off but just the same it doesn&#39;t bode well for autoload. </p>

<p>Now that Matz has effectively declared <code>#autoload</code> a code smell, I wonder if developers will take heed and stop using it? I have my doubts --it&#39;s just too damn convenient. I just wish it would use <code>Kernel#require</code> so I could use it along with Rolls.</p>
</p>
            <div class="meta">
                Written By <address>trans</a> &mdash;
                <time pubdate datetime="2012-14-June" title="June 14, 2012">June 14, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/2012/04/14/all-quiet-on-the-google-front/" rel="prefetch">Ruby AOP Made Simple</a></h2>
            <p><h1>All Quiet on the Google Front</h1>

<p>As I write this I am am on hold to Google main line. I&#39;ve been on hold for nearly an hour. <i>&quot;... Your call is important to us and we appreciate your patience. Please stay on the line and our next available representative will be with you shortly...&quot;</i> </p>

<p>How ironic that the help page for Google Groups says, &quot;The new Google Groups is faster, more powerful, and just plain cool.&quot; A few weeks ago, I noticed that Google de-listed Google Groups from the iGoogle menus and that all groups that are archive mirrors of external lists stopped working. As a maintainer of handful of such lists, I&#39;ve been investigating the issue for a while, but the only information I have been able to garner is by word of mouth via Matz, the creator of Ruby, &quot;friend of mine found out that recently google group started ignoring mails with List-ID header field.&quot; How <em>powerful cool</em> is that?</p>

<p>When I finish this article I will hang-up the phone and proceed to deprecate a number of Google Groups that I manage, namely, <code>ruby-talk-google</code>, <code>yaml-core</code>, <code>libxml-devel</code> and <code>rubygems-developers</code>. All of which are mirrored lists. At first I will just put up a deprecation notice. In a few weeks I will remove the lists altogether. But I won&#39;t stop there. The fact that these lists have all stopped working with the advent of Google&#39;s recent push to the &quot;new Google Groups&quot; and that Google has not made a single announcement about this MAJOR feature deprecation is inexcusable. I have had my fair share of issues with Google in the past. The inability to sort my mail by sender has always been a pain in my gmail-side. And everyone knows Google&#39;s customer support is notoriously non-existent. But I have always stayed with them because their web applications are generally excellent and really outstrip the competition in most respects, not the least of which is online availability, which makes them extremely convenient. Until recently I also felt that Google followed their company motto of &quot;Do No Evil&quot; fairly well. And yet it seems Google, like so many giants of the past, has begun to topple and loose sight of its foundations.</p>

<p>So, I plan to find a new home for my other non-mirrored lists as well. And sometime after that I will begin to look into new email options. I am hopeful, by the end of the year I will be Google free --for the first time since I first &quot;googled&quot; the Internet way back in 1999.</p>

<p>Speaking of time. I&#39;ve now been on hold for two-hours. I think it&#39;s time the throw in the old towel. I have a lot of &quot;Googleblechs!&quot; to clean up.</p>

<p><strong>[UPDATE]</strong> A few days after I wrote this, Google <em>mysteriously</em> fixed the issue, and now all mailing-lists are back online. I graciously concede that they have saved themselves from my abandonment, but <em>only</em> for the fact that there appear to be no comparable alternatives.</p>
</p>
            <div class="meta">
                Written By <address>trans</a> &mdash;
                <time pubdate datetime="2012-14-April" title="April 14, 2012">April 14, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/2012/03/21/configuration-rodeo/" rel="prefetch">Ruby AOP Made Simple</a></h2>
            <p><h1>Configuration Rodeo</h1>

<p>The history of configuration file conventions for Ruby projects has not been a particularly conclusive one. No one pervasive convention has ever developed. No developer has ever laid down a clear set of rules of engagement that we all can agree are worthy of follow. Rather, the realm of the developer in working out how to handle configuration for their project tools still smacks a bit of the Wild West. </p>

<p>Nonetheless, although no one approach has superseded all others, there are handful of patterns that tend to be used. We will review these conventions and then consider a possible comprehensive solution that could move us past the chaos du jour. </p>

<h2>The Conventions</h2>

<h3>1. Dot File</h3>

<p>Probably the oldest convention around is the dot-file. A dot-file is, as the name implies, a file with a dot in front of its name. Using traditional Unix shells, files that begin with a dot are <em>hidden files</em>. For the most part all this means is they do not show up in the typical directory listing, although some file tools will also ignore dot-files by default.</p>

<p>Back in the day, these files became the conventional means of adding per-user configuration to a system by adding dot-files to a user&#39;s home directory. There it was easily associated to a user and accessible, yet hidden from normal view. Consequently, project tools have adopted the same idea for project configuration, evidenced most clearly by SCM tools like Subversion (<code>.svn</code>), Git (<code>.git</code>) and Mercurial (<code>.hg</code>). Many Ruby-based tools have followed suite, such as RDoc&#39;s <code>.document</code> and YARD&#39;s <code>.yardopts</code> and <code>.yardoc</code>.</p>

<p>The advantages of the dot-file lies mostly in the fact that it&#39;s a well worn standard, and that it helps somewhat with directory clutter by keeping these files hidden under a typical listing. However, for the same reasons they are also a disadvantage. Many types of file listings do not actually hide these files, for example a GitHub listing, nor is it always advantageous that they be hidden because an important configuration file could go accidentally overlooked. Also dot-files are often without a proper file extension. While file extensions feel archaic, the fact remains that file extensions are still the primary way that file types are identified.</p>

<h3>2. Crapfile</h3>

<p>The so called &quot;Crapfile&quot; convention is another pattern that has been around for a long time in the form of the rather ubiquitous <code>Makefile</code>. Almost all C/C++ projects use the Make tool to handle compiling. In Ruby, this same convention came into vogue by way of the Rake tool, a Ruby emulation of the Make tool. Over the years this convention has become increasing popular. The Bundler project brought us the <code>Gemfile</code>. Heroku introduced the <code>Procfile</code>. And now a proverbial explosion of such files seems to be on the doorsteps of Ruby and Rails projects. </p>

<p>The advantage of the Crapfile is that it is visible and even prominent thanks to it&#39;s initial capitalization. In this sense it is the exact opposite of the dot-file. It&#39;s disadvantage is that too many of them tend to clutter up a project directory. This issue could be partially resolved at least if file listings grouped these files together instead of sorting them in with all-caps files, but as of yet no file listing provides for it. Another disadvantage is again the lack of a file extension. As with dot-files, this leaves many tools such as file editors, unable to handle the file optimally. However some tools do allow for an optional extension, e.g. <code>Rakefile.rb</code> is recognized by Rake, so there is some mitigation of the extension issue.</p>

<h3>3. Task Directory w/ Special Extension</h3>

<p>A third type of common configuration file you will find in Ruby projects is the <code>task/&lt;foo&gt;.&lt;tool&gt;</code> or <code>tasks/&lt;foo&gt;.&lt;tool&gt;</code> file. These files came about as a means of splitting Rakefiles up into topical and shareable units, and indeed this pattern is predominantly used by Rake files, e.g. <code>task/test.rake</code>. But sometimes you will see the pattern used for other tools such as a <code>task/test.watchr</code> file.</p>

<p>The use of <code>task</code> or <code>tasks</code> directory as a conventional location for project configuration files can be advantageous for many project tools. It makes it clear where to find them, the <code>task</code> directory itself is not hidden and does not clutter up a project&#39;s root directory and the design dictates the flexibility of allows multiple, and thus topical, configuration files. However, the issue of the file extension yet again effects these files due to the use the tool name as the extension. Also, there might be a slight downside if a project tool uses the configuration file as a project root marker. This is what Rake does with the Rakefile. While not a show-stopper --after all it can look for <code>task/*.&lt;tool&gt;</code>, it is not quite as ideal for the purpose.</p>

<h3>4. Config Directory</h3>

<p>Rails came along an introduced a variety of conventions for Ruby-based web applications, but also with ramifications for Ruby project&#39;s in general. One of the conventions introduced is the use of a <code>config</code> directory to house configuration files relevant to the Rails project. Unlike files in the <code>task</code> directory, there is no special extension involved. Generally the whole name of the file is used to identify the purpose of the file. For example <code>config/database.yml</code> is used to configure access to the underlying database.</p>

<p>At first glance, using <code>config</code> seems to have all the advantages of the <code>task</code> directory without the any of downsides associated with using special extensions. Nonetheless, the convention hasn&#39;t caught on for non-Rails projects. The reason is unknown to me, but perhaps it as trivial as the the simple fact that the term <code>config</code> is six-characters long, whereas all conventional project directory names, that have managed to persist, are five or less and most often only three or four characters. It might seem a silly thing to get caught up on, but when a developer is looking at project file listings dozens of times a day or more, the fact the one entry should stick out excessively from the rest is what is commonly called an &quot;eye-sore&quot;. And an &quot;eye-sore&quot; is plenty of reason to deter usage. It is interesting to wonder if Rails had chosen a shorter term, say <code>conf/</code> or <code>cfg/</code> if it would have made the jump. In any case, that is mere speculation.</p>

<p>There are a few project&#39;s that support a <code>config</code> directory, and do so to good effect. Cucumber for example will look for either &#39;cucumber.yml&#39;, &#39;config/cucumber.yml&#39; or &#39;.config/cucumber.yml&#39;.</p>

<h3>5. Ordinary File</h3>

<p>The last convention really isn&#39;t a convention at all. Some project tools just designate an ordinary file name as the configuration file and expect to find it in the project&#39;s root directory. In many ways, one could argue this is the best choice. It doesn&#39;t suffer from the file extension issue and the files generally sort separate from documentation files which are capitalized. However, it does suffer a bit in that these files don&#39;t stand out in any way as configuration files. And this fact allows them to still make a project seem cluttered if there are more than just a couple of them.</p>

<h2>When to Use Which</h2>

<p>Hidden dot-files have their place, but they are best reserved for files that the developer will rarely if ever need to edit. Generated files are the best example. The reason for this rule of thumb is simple. If a developer doesn&#39;t see a file, the developer might not realize it already exists or know that he/she may need to edit it. If dot-files do fit your use case, also consider using a dot-directory instead of just a file. This ensures that no additional entries will clutter up the root project directory should more than one configuration file prove necessary or useful.</p>

<p>Crapfiles are not a horrible choice, but as the colorful name suggests, they are not nearly the best choice either. Some developers argue against the use of Crapfiles because the <code>-file</code> suffix is rather redundant. While that&#39;s a fair point, one can also argue that the suffix helps distinguish configuration files from other files. Since Crapfiles tend to standout, they are best suited to configurations that need frequent editing. A word of caution about naming, when you have a tool with a name like &quot;Foreman&quot; and it&#39;s configuration file is called &quot;Procfile&quot;, things are obviously not very intuitive. Consider carefully if perhaps an ordinary file name would suffice instead --it can always be capitalized if it needs to have prominence.</p>

<p>Task files are a good approach for tools that can have multiple configurations or configuration profiles.  But even if a project does not support multiple configurations, there is nothing stopping the <code>task</code> directory form holding ordinary files. Which means it could effectively co-opt the advantages of the <code>config</code> directory too.</p>

<p>As for the <code>config</code> directory. If you are developing a Rails project, obviously that is the place for configuration files. While some have argued that <code>config</code> is just for Rails and should not be co-opted for plain Ruby projects, presumably to save confusion, that seems too strict a view. If using the <code>task</code> directory to the same end doesn&#39;t strike your fancy, then <code>config</code> is clearly the best place to put configuration files. The only good exception is when special prominence is needed that only a root level and unhidden file can bring.</p>

<p>Simple uncaptialized ordinary root level files, while seemingly the least problematic, also have nothing that makes them special, which probably accounts for why they are so rarely used. They might as well be placed in the <code>task</code> or <code>config</code> directory to avoid root directory clutter.</p>

<h2>Is there a Better Way?</h2>

<p>So, is there a better way? That depends on how you look at it. One thing is for certain, there is no <em>perfect</em> way, but that doesn&#39;t exclude the possibility of compelling approach that mitigates most issues.</p>

<p>The overarching problem here is simply the fact that so many conventions exist. With such a variety of naming conventions, it exacerbates the issue of cluttered project directories multiple times over.
Another disadvantage for all of these approaches, they make it difficult to share common configuration.</p>

<p>In an effort to create a comprehensive solution, the <a href="http://github.com/rubyworks/rc">RC</a> project has been created. RC designate a single file, <code>Config.rb</code>, in which all tool configurations can be defined. A typical entry in this file is for test configuration. For example, to configure the <code>qed</code> test tool we might designate:</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby">  <span class="n">profile</span> <span class="ss">:coverage</span> <span class="k">do</span>
    <span class="n">config</span> <span class="ss">:qed</span> <span class="k">do</span>
      <span class="nb">require</span> <span class="s1">&#39;simplecov&#39;</span>
      <span class="no">SimpleCov</span><span class="o">.</span><span class="n">start</span> <span class="k">do</span>
        <span class="n">coverage_dir</span> <span class="s1">&#39;log/coverage&#39;</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
</code></pre></div>
<p>RC allows configurations to be grouped into profiles. Tool developers can take advantage of profiles to suite the needs of the tool (or not at all). The major advantage of using a single configuration file is the ability for variant configurations to share settings. Another advantage is to import configurations from other projects. For example, the QED project provides the basic SimpleCov configuration which can be easily reused.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby">  <span class="n">profile</span> <span class="ss">:coverage</span> <span class="k">do</span>
    <span class="n">config</span> <span class="ss">:qed</span><span class="p">,</span> <span class="ss">:from</span><span class="o">=&gt;[</span><span class="ss">:qed</span><span class="p">,</span> <span class="ss">profile</span><span class="p">:</span> <span class="n">simplecov</span><span class="o">]</span>
  <span class="k">end</span>
</code></pre></div>
<p>RC is still a work in progress, but the overarching design is in place with numerous advantages over the scattered approaches of the past. Though some of the traditional approaches might still be more suited to very specific cases, most tools can benefit from a unified approach.</p>
</p>
            <div class="meta">
                Written By <address>trans</a> &mdash;
                <time pubdate datetime="2012-21-March" title="March 21, 2012">March 21, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
  
    <section class="index">
        <!-- -->
        <div>
            <h2 class="title"><a href="/2012/01/19/rubys-unexceptional-exception-constructor/" rel="prefetch">Ruby AOP Made Simple</a></h2>
            <p><p>You would think after all this time Ruby&#39;s Exception class would be a rather robust and clearly comprehensible class.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby">  <span class="k">raise</span><span class="p">(</span><span class="n">exception</span> <span class="o">[</span><span class="p">,</span> <span class="n">string</span> <span class="o">[</span><span class="p">,</span> <span class="n">array</span><span class="o">]]</span><span class="p">)</span>
</code></pre></div>
<p>Now lets try something </p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">MyError</span> <span class="o">&lt;</span> <span class="no">Exception</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">()</span>
    <span class="k">super</span><span class="p">()</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div><div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="o">&gt;&gt;</span> <span class="k">raise</span> <span class="no">MyError</span>
<span class="ss">MyError</span><span class="p">:</span> <span class="no">MyError</span>
    <span class="n">from</span> <span class="p">(</span><span class="n">irb</span><span class="p">):</span><span class="mi">12</span>
    <span class="n">from</span> <span class="sr">/home/</span><span class="n">trans</span><span class="o">/.</span><span class="n">rbenv</span><span class="o">/</span><span class="n">versions</span><span class="o">/</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">3</span><span class="o">-</span><span class="n">rc1</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="ss">irb</span><span class="p">:</span><span class="mi">12</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;&#39;</span>
</code></pre></div>
<p>No problem. But now lets try to set the message and the backtrace.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="o">&gt;&gt;</span> <span class="k">raise</span> <span class="no">MyError</span><span class="p">,</span> <span class="s2">&quot;This is an error!&quot;</span>
<span class="ss">ArgumentError</span><span class="p">:</span> <span class="n">wrong</span> <span class="n">number</span> <span class="n">of</span> <span class="n">arguments</span> <span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">from</span> <span class="p">(</span><span class="n">irb</span><span class="p">):</span><span class="mi">8</span><span class="ss">:in</span> <span class="sb">`initialize&#39;</span>
<span class="sb">    from (irb):13:in `</span><span class="n">exception</span><span class="s1">&#39;</span>
<span class="s1">    from (irb):13:in `raise&#39;</span>
</code></pre></div>
<p>Clearly Ruby expects any Exception&#39;s initialize method to handle the message argument. That&#39;s a rather strict contract for something Ruby is letting us override. But okay, let&#39;s take that as a given. Obviously Ruby is routing the #raise call to the exception&#39;s initializer. So then we should that the third <code>array</code> argument would passed along too. Turns out that&#39;s not the case.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">MyError</span> <span class="o">&lt;</span> <span class="no">Exception</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="nb">p</span> <span class="n">args</span>
    <span class="k">super</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div><div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="o">&gt;&gt;</span> <span class="k">raise</span> <span class="no">MyError</span><span class="p">,</span> <span class="s2">&quot;This is an error!&quot;</span><span class="p">,</span> <span class="nb">caller</span>
<span class="o">[</span><span class="s2">&quot;This is an error!&quot;</span><span class="o">]</span>
<span class="ss">RuntimeError</span><span class="p">:</span> <span class="no">This</span> <span class="n">is</span> <span class="n">an</span> <span class="no">Error</span><span class="o">!</span>
    <span class="n">from</span> <span class="p">(</span><span class="n">irb</span><span class="p">):</span><span class="mi">1</span>
    <span class="n">from</span> <span class="sr">/home/</span><span class="n">trans</span><span class="o">/.</span><span class="n">rbenv</span><span class="o">/</span><span class="n">versions</span><span class="o">/</span><span class="mi">1</span><span class="o">.</span><span class="mi">9</span><span class="o">.</span><span class="mi">3</span><span class="o">-</span><span class="n">rc1</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="ss">irb</span><span class="p">:</span><span class="mi">12</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;&#39;</span>
</code></pre></div>
<p>Nope. No caller in sight. So where did it go? Turns out Ruby is setting the caller via the error&#39;s <code>#set_backtrace</code> method and doesn&#39;t depend on the initializer to handle it at all. This seems rather odd, since it was keen on letting the initializer handle the message argument, and would blow-up if the class won&#39;t take it.</p>

<p>So the upshot seems to be that we can&#39;t customize an exceptions initializer adn expect <code>#raise</code> to play along.</p>

<p>I actually had another point to make about how things gets even worse. Unfortunately had to take care of other chores and by the time I got back to this blog post (months later) I forgot what these &quot;worse things&quot; were. I think it had something to do with how <code>#message</code> calls <code>#to_s</code> rather then returning the message passed to the initializer. But as said I am not certain now. </p>

<p>My conclusion however is this. I was attempting to make use of an Exception class as something more than a mere container for a string message for the <a href="http://github.com/rubyworks/assay">Assay</a> project. That is when I ran into these oddities which made doing so quite unpleasant. To my dismay I ended up abandoning the approach. I brought some aspects of this up in a <a href="http://bugs.ruby-lang.org/issues/5898">issue report</a>.</p>

<p>For reference, here is the relevant Ruby <a href="https://github.com/ruby/ruby/blob/trunk/eval.c">source code</a>.</p>
</p>
            <div class="meta">
                Written By <address>trans</a> &mdash;
                <time pubdate datetime="2012-19-January" title="January 19, 2012">January 19, 2012</time>
            </div>
        </div>
        <hr>
    </section>
    
    
    <section class="pagination" style="text-align:center">
      
      
        <a href="/page2" class="btn btn-outline">Older </a>
      
    </section>
</article>


<footer class="site-footer">
    <div class="container">
        &copy; 2014 
        
        <nav>
            <a href="http://tabcomputing.com/">Tab Computing</a> &middot;
            <a href="/">Blog</a> &middot;
            <a href="http://incorporated.sendtoinc.com/">Product</a> &middot; 
            <a href="https://tabcomputing.com/about/">About</a>
        </nav>
        
        <nav class="social">
            
                
            <a href="/feed.xml" title="RSS Feed">
                <i class="icon icon-rss black"></i>
            </a>
        </nav>
        <p>Incorporated theme by <a href="https://sendtoinc.com">Inc</a></p>
    </div>
</footer>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/assets/main.js"></script>






</body>
</html>
