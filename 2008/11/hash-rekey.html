
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />

  <title>Welcome to Webrite</title>

  <!-- google verification-->
  <meta name="verify-v1" content="p14vW7GGMohDo2YKUHm0SXXTL+tzyPbKxxp35/WIQLA=" />

  <meta name="DESCRIPTION"
        content="Webrite is a K.I.S.S. website builder."/>

  <link rel="icon" href="../../assets/images/icon.gif" type="image/x-icon" />

  <link href="atom.xml" rel="alternate" title="blog.webrite.rubyforge.org" type="application/atom+xml" />

  <!-- STYLESHEETS -->

  <link href="../../assets/styles/reset.css"  rel="stylesheet" type="text/css" />

  <link href="../../assets/styles/screen.css" rel="stylesheet" type="text/css" media="screen, projection" />
  <link href="../../assets/styles/print.css"  rel="stylesheet" type="text/css" media="print" />

  <!--[if IE]>
      <link href="/ie.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <![endif]-->

  <link href="../../assets/styles/layout.css"  rel="stylesheet" type="text/css" />
  <link href="../../assets/styles/font.css"    rel="stylesheet" type="text/css" />
  <link href="../../assets/styles/color.css"   rel="stylesheet" type="text/css" />
  <link href="../../assets/styles/syntax.css"  rel="stylesheet" type="text/css" />

  <!-- <script src="js/rdocs.js" type="text/javascript"></script> -->
</head>
<body>

<div class="header">
  <div class="header-inner">
    <div class="title">
      <img src="../../assets/images/sevenhand.gif" style="float: right; height: 210px; margin-top: -5px;"/>
      <img class="logo" src="../../assets/images/transcode.png" width="500px" align="top" />
    </div>
    <div class="menu">
      <div class="menu-inner">
        <a href="../../blog.html">Blog</a> &middot;
        <a href="../../tags.html">Tags</a> &middot;
        <a href="http://groups.google.com/group/tigerops-community?hl=en">Mail</a> &middot;
        <a href="pussy.html">Pussy</a> &middot;
        <a href="../../about.html">About</a>
      </div>
    </div>
  </div>
</div>

<div class="doc">
  
<div class="page">

  <h1>Facets Hash#rekey</h1>

  <p>This is the first in a series of posts in which I plan to introduce my fellow Rubyists to the plethora or goodness that is <a href="http://facets.rubyforge.org">Ruby Facets</a>.</p>

<p>Ruby Facets has been in development for several years, starting out as a rather rag-tag collection general purpose Ruby scripts, and has evolved into the latest release, version 2.5.0, which has reached a nice level of maturity --getting pretty close, I suppose one could say, to that stately realm of "enterprise-ready".</p>

<p>Every few weeks or so, I'll pick a library or particular extension and expound upon it. While the main intent of this series is to let others know what Facets makes available to them. I will also use it as a platform to further improve and polish Facets. So please, feel free to comment, make suggestions and point out alternatives, so that Facets might better serve the Ruby community in the future.

Okay, now to the meat of this edition...

I decided to start with something quite simple, but very useful, homogenizing hash keys. Currently in Ruby, this requires code like:</p>


<div class="CodeRay">
  <div class="code"><pre>
  new_hash = {}
  old_hash.each <span style="color:#080;font-weight:bold">do</span> |k,v|
    k = k.to_sym
    new_hash[k] = v
  <span style="color:#080;font-weight:bold">end</span>

</pre></div>
</div>

<p>Of course, that can be golfed-down a bit, but I wanted to spell it out for clarity. In this particular example, I converted all the keys to symbols (<code>to_sym</code>). Along with strings, that is one of the most commonly needed key conversions. Common enough in fact that Rails' ActiveSupport library provides <code>symbolize_keys</code> and an alias <code>#to_options</code>. It's also provides <code>stringify_keys</code>. Facets offers these methods too, since they are certainly so well known by now. However, Facets provides and recommends a more versatile method, <code>rekey</code>. With it the above example becomes as simple as:</p>

<div class="CodeRay">
  <div class="code"><pre>
  old_hash.rekey

</pre></div>
</div>

<p><code>Hash#rekey</code> actually takes a block, but if no block is given, as in the above, it defaults to symbol conversion. If we wanted to convert the keys to strings instead, the magic of Symbol#to_proc makes that as simple as:</p>

<div class="CodeRay">
  <div class="code"><pre>
  old_hash.rekey(&amp;<span style="color:#A60">:to_s</span>)

</pre></div>
</div>

<p>And lastly, of course, we could get crazy with it and make every key a "Turk".</p>

<div class="CodeRay">
  <div class="code"><pre>
  old_hash.rekey{ |k| <span style="color:#036;font-weight:bold">Turk</span>.new(k) }

</pre></div>
</div>

<p>I don't know about you, but I like turk-keys. Oh, the pun! It hurts! :)</p>

<p>Happy Thanksgiving.</p>


  <small>Written by trans, 2008-11-23</small>

  <ul class="posts">
    
    
  </ul>

</div>


</div>

<br style="clear: both;"/><br/><br/>

<div class="footer">
<div class="footer-inner">
  Copyright (c) 2005,2009 Thomas Sawyer
</div>
</div>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2883355-2";
urchinTracker();
</script>

</body>
</html>

